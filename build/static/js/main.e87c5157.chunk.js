(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{240:function(e,t,n){},277:function(e,t){},312:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){},455:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){},461:function(e,t,n){},494:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(16),c=n.n(r),i=n(7),o=n(24),l=n(27),d=n(12),j=n(8),u=n.n(j),b=n(11),p=n(1);function h(e,t){return function(n){var s=Object(l.f)(),r=Object(a.useState)(!1),c=Object(i.a)(r,2),o=c[0],j=c[1],h=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/isauth");case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,a.success?(t(!0),console.log("auth"),j(!0)):(t(!1),j(!1),console.log("not auth"),s.push("/signin"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h()}),[]),Object(p.jsx)(p.Fragment,{children:o?Object(p.jsx)(e,Object(d.a)({},n)):null})}}var m=n(28),O=n(255),x=n.n(O),f=(n(312),function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"overlay"}),Object(p.jsxs)("div",{className:"loaders",children:[" ",Object(p.jsx)(x.a,{fontSize:"large",style:{fill:"grey"}})," "]})]})}),g=n(39),y=n(19),v=n(26),w=n(78),N=n.n(w),S=n(64),k=n.n(S),_=n(25),I=n(533),C=n(534),T=n(535),F=n(536),A=n(537),P=n(571),E=Object(I.a)((function(e){return{root:{display:"flex",justifyContent:"center",marginTop:"30px"},previewcard:{width:"300px",height:"340px",margin:"auto"},media:{height:"550px",width:"550px",paddingTop:"56.25%"},previewmedia:{width:"300px",height:"200px"},modalHeader:{display:"flex",justifyContent:"center",fontWeight:"bold"},imageIcon:{marginBottom:"8px",marginRight:"5px"}}})),U=function(e){var t=e.storyModal,n=e.setStoryModal,s=E(),r=Object(a.useState)(""),c=Object(i.a)(r,2),o=c[0],l=c[1],d=Object(a.useState)(""),j=Object(i.a)(d,2),h=(j[0],j[1]),m=Object(a.useState)(!1),O=Object(i.a)(m,2),x=(O[0],O[1]),f=Object(a.useState)(!1),v=Object(i.a)(f,2),w=v[0],S=v[1],I=Object(a.useState)(!1),U=Object(i.a)(I,2),R=U[0],D=U[1],z=Object(a.useState)(""),J=Object(i.a)(z,2),W=J[0],B=J[1],L=(JSON.parse(localStorage.getItem("user")),function(){return n(!1)}),M=y.a().shape({photo:y.c().required("photo is required")}),q=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={photo:t.photo,UserId:JSON.parse(localStorage.getItem("user")).id,fileName:t.fileName},e.prev=1,e.next=4,fetch("/story",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return a=e.sent,e.next=7,a.json();case 7:(s=e.sent).story?(D(!1),B("Story Added"),S(!0),setTimeout((function(){L(),S(!1)}),1e3)):(D(!0),B(s.error),S(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(_.a,{size:"lg",centered:!0,show:t,onHide:L,children:[Object(p.jsxs)(_.a.Header,{className:s.modalHeader,children:[" ",Object(p.jsx)(_.a.Title,{style:{fontWeight:"700"},children:" Add new story "})," "]}),Object(p.jsx)(_.a.Body,{children:Object(p.jsx)(g.b,{initialValues:{photo:"",content:""},validationSchema:M,onSubmit:function(e){if(e.fileName=o,"object"===typeof e.photo){var t=new FileReader;t.readAsDataURL(e.photo),t.onloadend=function(){h(t.result),e.photo=t.result,q(e)}}else q(e)},children:function(e){var t=e.errors,n=e.touched,a=e.setFieldValue;return Object(p.jsxs)(g.a,{style:{textAlign:"center"},children:[Object(p.jsx)(C.a,{id:"file",className:"inputfile",type:"file",name:"photo",onChange:function(e){return function(e,t){var n=new FileReader;t("photo",e.target.files[0]),0===e.target.files.length?(x(!1),l(""),h("")):(n.readAsDataURL(e.target.files[0]),n.onloadend=function(){h(n.result)},x(!0),l(e.target.files[0].name))}(e,a)},hidden:!0}),Object(p.jsxs)(T.a,{className:s.profileBtn,color:"primary",variant:"outlined",children:[Object(p.jsx)(N.a,{className:s.imageIcon}),Object(p.jsxs)("label",{htmlFor:"file",children:[o?"".concat(o," UPLOADED"):"UPLPOAD IMAGE"," "]})]}),t.photo&&n.photo?Object(p.jsx)("div",{className:"error",children:t.photo}):null,Object(p.jsx)(F.a,{in:w,children:Object(p.jsx)(P.a,{style:{margin:"10px"},severity:R?"error":"success",action:Object(p.jsxs)(A.a,{color:"inherit",size:"small",onClick:function(){return S(!1)},children:[" ",Object(p.jsx)(k.a,{fontSize:"inherit"})," "]}),children:W})}),Object(p.jsx)(T.a,{style:{margin:"10px"},variant:"outlined",color:"primary",type:"Submit",children:"Submit"})]})}})})]})})},R=n(574),D=n(570),z=n(265),J=n.n(z),W=n(264),B=n.n(W),L=(n(448),function(e){var t=e.storiesUsers,n=Object(a.useState)([]),s=Object(i.a)(n,2),r=s[0],c=s[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),d=l[0],j=l[1],u=Object(a.useState)(!1),b=Object(i.a)(u,2),h=b[0],m=b[1];return Object(a.useEffect)((function(){c(t)}),[]),Object(p.jsxs)(D.b,{children:[0!==d.length&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"overlays"}),Object(p.jsx)("div",{style:{position:"fixed",top:"20%",left:"30%",zIndex:"2"},children:Object(p.jsx)(B.a,{width:432,height:500,stories:d,onAllStoriesEnd:function(){return j([])}})})]}),Object(p.jsxs)("div",{className:"stories",children:[Object(p.jsx)("div",{className:"story_users",children:r&&r.map((function(e){return Object(p.jsxs)("div",{className:"story-div",children:[" ",Object(p.jsx)(R.a,{style:{height:"70px",width:"70px",border:"2px solid #D82B7D"},onClick:function(){return function(e,t,n){var a=[];e.forEach((function(e){var s=e.photo.split("upload/"),r={url:"".concat(s[0],"upload/w_432,h_500,c_scale/").concat(s[1]),header:{heading:t,profileImage:n}};a.push(r)})),j(a)}(e.Stories,e.username,e.profileUrl)},children:Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:e.profile,width:"70",height:"70",crop:"scale"})}),Object(p.jsx)("span",{className:"story_username",children:e.username})]},e.id)}))}),Object(p.jsxs)("div",{className:"add_Story_btn",id:"stepThree",title:"Add story",children:[" ",Object(p.jsx)(J.a,{onClick:function(){return m(!0)},style:{fill:"#ED4A4D"},fontSize:"large"})," "]})]}),Object(p.jsx)(U,{storyModal:h,setStoryModal:m})]})}),M=n(266),q=n.n(M),H=function(e){e.stepsEnabled;var t=e.setStepsEnabled,n=JSON.parse(localStorage.getItem("user")),s=Object(a.useState)(!0),r=Object(i.a)(s,2),c=r[0],o=r[1],l=function(){return o(!1)},d=function(){t(!0)};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(_.a,{show:c,onHide:l,backdrop:"static",keyboard:!1,style:{textAlign:"center"},children:[Object(p.jsx)(_.a.Header,{closeButton:!0,children:Object(p.jsxs)(_.a.Title,{style:{margin:"auto",fontWeight:"600"},children:["Hello ",n.username," "]})}),Object(p.jsx)(_.a.Body,{className:"world",children:"Welcome to instagram! the most popular social media in the world with more than 100 million users!"}),Object(p.jsx)(_.a.Footer,{children:Object(p.jsxs)(T.a,{variant:"outlined",color:"primary",onClick:function(){return l(),void d()},style:{margin:"auto"},children:["Let's get started! ",Object(p.jsx)(q.a,{style:{margin:"10px 10px 12"}})]})})]})})},V=n(267),G=n.n(V),Y=n(538),Q=n(539),K=n(540),X=n(541),Z=n(542),$=n(543),ee=n(544),te=n(545),ne=n(546),ae=n(547),se=n(548),re=n(549),ce=(n(449),function(e){var t=e.shareModalOpen,n=e.setShareModalOpen,a=function(){return n(!1)};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(_.a,{show:t,onHide:a,backdrop:"static",keyboard:!1,style:{textAlign:"center",width:"30%"},children:[Object(p.jsx)(_.a.Header,{closeButton:!0,children:Object(p.jsx)(_.a.Title,{style:{fontWeight:"600"},children:"Share Post "})}),Object(p.jsxs)(_.a.Body,{className:"world",children:[Object(p.jsx)(Y.a,{className:"icon",url:"https://www.instagram.com/",quote:"Come and visit insragram!",children:Object(p.jsx)(Q.a,{size:32,round:!0})}),Object(p.jsx)(K.a,{className:"icon",url:"https://www.instagram.com/",appId:"521270401588372",children:Object(p.jsx)(X.a,{size:32,round:!0})}),Object(p.jsx)(Z.a,{className:"icon",url:"https://www.instagram.com/",title:"come alone man",children:Object(p.jsx)($.a,{size:32,round:!0})}),Object(p.jsx)(ee.a,{className:"icon",url:"https://www.instagram.com/",title:"he man",children:Object(p.jsx)(te.a,{size:32,round:!0})}),Object(p.jsx)(ne.a,{className:"icon",url:"https://www.instagram.com/",title:"come and visit instagram!",separator:":",children:Object(p.jsx)(ae.a,{size:32,round:!0})}),Object(p.jsx)(se.a,{className:"icon",url:"https://www.instagram.com/",subject:"come and visit instagram",body:"body",children:Object(p.jsx)(re.a,{size:32,round:!0})})]}),Object(p.jsx)(_.a.Footer,{children:Object(p.jsxs)(T.a,{variant:"outlined",color:"secondary",onClick:function(){return a()},style:{margin:"auto"},children:["Close ",Object(p.jsx)(G.a,{style:{margin:"10px 10px 12"}})]})})]})})}),ie=n(550),oe=n(551),le=n(552),de=n(553),je=n(554),ue=n(555),be=n(114),pe=n(556),he=n(568),me=n(557),Oe=n(572),xe=n(270),fe=n.n(xe),ge=n(558),ye=n(108),ve=n.n(ye),we=n(159),Ne=n.n(we),Se=n(107),ke=n.n(Se),_e=n(269),Ie=n.n(_e),Ce=n(160),Te=n.n(Ce),Fe=n(79),Ae=n.n(Fe),Pe=n(268),Ee=(n(454),n(455),n(456)),Ue=Object(I.a)((function(e){return{root:{display:"flex",justifyContent:"center",marginTop:"30px"},previewcard:{width:"300px",height:"340px",margin:"auto"},media:{height:"550px",width:"550px",paddingTop:"56.25%"},previewmedia:{width:"300px",height:"200px"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},modalHeader:{display:"flex",justifyContent:"center",fontWeight:"bold"},fab:{position:"fixed",bottom:"10px",left:"75%",whiteSpace:"nowrap",zIndex:"50px",borderRadius:"20px",backgroundColor:"lightblue"},profileBtn:{paddingTop:"10px",marginTop:"10px",marginBottom:"10px"},imageIcon:{marginBottom:"8px",marginRight:"5px"},extendedIcon:{marginRight:e.spacing(1)},likes:{color:"#262626",fontSize:"14px",fontWeight:"600"},comment:{display:"flex",alignItems:"center",marginTop:"18px",color:"#262626",fontSize:"14px",fontWeight:"600"},AddCommenttextField:{flexBasis:280,margin:"20px 2px",width:"100%",padding:"1% 0%"},divider:{margin:"15px 0px"},iconButton:{"&:hover":{color:"red"},"&:click":{outline:"none"}},suggestion:{position:"fixed",right:"100px",top:"100px",display:"flex",flexDirection:"column",width:"100%",overflowY:"auto",height:"100%",paddingRight:"20px",scrollbarWidth:"none"},story:{height:"118px",width:"614px",display:"flex",marginLeft:"360px"}}})),Re=function(){var e=Ue(),t=JSON.parse(localStorage.getItem("user")),n=Object(a.useState)([]),s=Object(i.a)(n,2),r=s[0],c=s[1],l=Object(a.useState)(!1),d=Object(i.a)(l,2),j=d[0],h=d[1],O=Object(a.useState)(!1),x=Object(i.a)(O,2),w=x[0],S=x[1],I=Object(a.useState)(""),E=Object(i.a)(I,2),U=E[0],z=E[1],J=Object(a.useState)(""),W=Object(i.a)(J,2),B=W[0],M=W[1],q=Object(a.useState)([]),V=Object(i.a)(q,2),G=V[0],Y=V[1],Q=Object(a.useState)(!1),K=Object(i.a)(Q,2),X=(K[0],K[1],Object(a.useState)(!1)),Z=Object(i.a)(X,2),$=(Z[0],Z[1],Object(a.useState)([])),ee=Object(i.a)($,2),te=(ee[0],ee[1],Object(a.useState)([])),ne=Object(i.a)(te,2),ae=ne[0],se=ne[1],re=Object(a.useState)(!1),xe=Object(i.a)(re,2),ye=(xe[0],xe[1]),we=Object(a.useState)(""),Se=Object(i.a)(we,2),_e=Se[0],Ce=Se[1],Fe=Object(a.useState)(!1),Re=Object(i.a)(Fe,2),De=Re[0],ze=Re[1],Je=Object(a.useState)(""),We=Object(i.a)(Je,2),Be=We[0],Le=We[1],Me=Object(a.useState)(!1),qe=Object(i.a)(Me,2),He=qe[0],Ve=qe[1],Ge=Object(a.useState)(!1),Ye=Object(i.a)(Ge,2),Qe=Ye[0],Ke=Ye[1],Xe=Object(a.useState)(!1),Ze=Object(i.a)(Xe,2),$e=Ze[0],et=Ze[1],tt=Object(a.useState)(0),nt=Object(i.a)(tt,2),at=nt[0],st=(nt[1],Object(a.useState)([{element:"#stepOne",intro:"Start following users to see their special moments and experiences \ud83d\ude0e",position:"left",tooltipClass:"myTooltipClass"},{element:"#stepTwo",intro:"Add your own photo's and video's and start share your feelings with the world! \ud83d\udcf7",position:"left",tooltipClass:"myTooltipClass"},{element:"#stepThree",intro:"Upload a story daily to update your followers on how you are doing today \ud83e\udd73. The story is completely gone after 24 hours",position:"left",tooltipClass:"myTooltipClass"}])),rt=Object(i.a)(st,2),ct=rt[0],it=(rt[1],function(){return Ve(!1)}),ot=y.a().shape({photo:y.c().required("photo is required"),content:y.c().required("content is required")}),lt=function(){var e=Object(b.a)(u.a.mark((function e(n){var a,s,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={photo:n.photo,likes:0,content:n.content,UserId:JSON.parse(localStorage.getItem("user")).id,fileName:n.fileName,date:Ee().format("MMMM Do, h:mm a").toString()},e.prev=1,e.next=4,fetch("/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return s=e.sent,e.next=7,s.json();case 7:(i=e.sent).post?(console.log(i.post),o=Object(m.a)(r),l={index:r.length,publisher_id:t.id,publisher_username:t.username,publisher_profile:t.profile,post_id:i.post.id,post_content:i.post.content,post_likes:[],post_likes_old:[],post_likeby:[],post_photo:i.post.photo,post_date:i.post.date,post_comments:[]},o.push(l),console.log(o),c(Object(m.a)(o)),S(!1),Ce("Post Added!"),ze(!0),setTimeout((function(){ze(!1),it()}),1e3)):(S(!0),Ce(i.error),ze(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=Object(b.a)(u.a.mark((function e(t,n){var a,s,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r,s={time:Ee().startOf("hour").fromNow().toString(),content:U,commenter:JSON.parse(localStorage.getItem("user")).username,commenter_profile:JSON.parse(localStorage.getItem("user")).profile},console.log(a[n].post_comments),a[n].post_comments.push(s),console.log(a[n].post_comments),c(Object(m.a)(a)),i={time:Ee().startOf("hour").fromNow().toString(),content:U,PostId:t,UserId:JSON.parse(localStorage.getItem("user")).id},e.prev=7,e.next=10,fetch("/comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 10:return o=e.sent,e.next=13,o.json();case 13:e.sent.comment||console.log("error"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t,n){return e.apply(this,arguments)}}(),jt=function(){var e=Object(b.a)(u.a.mark((function e(n,a,s){var i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=r,s?(console.log("remove"),i[a].post_likeby=i[a].post_likeby.filter((function(e){return e!==t.username})),i[a].like=!1,c(Object(m.a)(i)),o=!1):(i[a].post_likeby.push(t.username),i[a].like=!0,c(Object(m.a)(i)),o=!0),e.next=5,fetch("/post/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({add:o,PostId:n,UserId:t.id})});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),ut=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=0,e.next=4,fetch("/post");case 4:return s=e.sent,e.next=7,s.json();case 7:e.sent.forEach((function(e){(t.Followings.find((function(t){return t.followed_id===e.publisher_id}))||t.id===e.publisher_id||"instagram"===e.publisher_username)&&e.posts.forEach((function(s){var r=[];s.post_likes.forEach((function(e){return r.push(e.like_username)}));var c=Boolean(s.post_likes.find((function(e){return Number(e.like_userid)===Number(t.id)}))),i={index:a,publisher_id:e.publisher_id,publisher_username:e.publisher_username,publisher_profile:e.publisher_profile,post_id:s.post_id,post_content:s.post_content,post_likes:s.post_likes.length,post_likes_old:s.post_likes.length,post_likeby:r,post_photo:s.post_photo,post_date:s.post_date,like:c,post_comments:s.post_comments};a++,n.push(i)}))})),console.log(n),c(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/story");case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,s=a.stories,r=[],s.forEach((function(e){(e.User.Followers.find((function(e){return Number(e.follower_id)===Number(t.id)}))||Number(e.User.id)===Number(t.id)||"instagram"===e.User.username)&&(r.find((function(t){return t.username===e.User.username}))||r.push(e.User))})),se(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/user");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,s=a.users,r=[],s.forEach((function(e){e.Followers.find((function(e){return Number(e.follower_id)===Number(t.id)}))||Number(e.id)===Number(t.id)||"instagram"===e.username||r.push(e)})),Y(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=Object(b.a)(u.a.mark((function e(n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/follow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userWhoWantToFollow:t.id,userWhoGetsFollower:n})});case 2:return a=e.sent,e.next=5,a.json();case 5:e.sent.success&&(s=G.filter((function(e){return e.id!==n})),Y(Object(m.a)(s)),t.Followings.push({UserId:Number(t.id),followed_id:Number(n)}),localStorage.setItem("user",JSON.stringify(t)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t.newUser?(Ke(!0),t.newUser=!1,localStorage.setItem("user",JSON.stringify(t))):Ke(!1),ut(),bt(),pt()}),[]),Object(p.jsxs)(p.Fragment,{children:[Qe?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(H,{stepsEnabled:$e,setStepsEnabled:et}),Object(p.jsx)(Pe.Steps,{enabled:$e,steps:ct,initialStep:at,onExit:function(){et(!1),Ke(!1)}})]}):null,Object(p.jsx)(D.b,{injectFirst:!0,children:Object(p.jsxs)(ie.a,{container:!0,children:[Object(p.jsx)(ie.a,{item:!0,className:e.story,sm:4,md:4,children:0!==ae.length&&Object(p.jsx)(L,{storiesUsers:ae})}),r?r.slice(0).reverse().map((function(n){return Object(p.jsx)(ie.a,{item:!0,sm:12,md:10,className:e.root,children:Object(p.jsxs)(oe.a,{className:e.card,children:[Object(p.jsx)(le.a,{avatar:Object(p.jsxs)(R.a,{children:[Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:n.publisher_profile,width:"70",height:"40",crop:"scale"})," "]}),action:Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(Ne.a,{})," "]}),title:Object(p.jsx)(o.b,{to:"/profile/".concat(n.publisher_id),children:Object(p.jsx)("span",{className:e.likes,children:n.publisher_username})})}),Object(p.jsx)(de.a,{className:e.media,image:n.post_photo}),Object(p.jsxs)(je.a,{disableSpacing:!0,children:[Object(p.jsxs)(A.a,{className:e.iconButton,onClick:function(){return jt(n.post_id,n.index,n.like)},children:[n.like?Object(p.jsx)(Ae.a,{style:{fill:"red"}}):Object(p.jsx)(Ie.a,{})," "]}),Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(ke.a,{})," "]}),Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(ve.a,{onClick:function(){return h(!0)}})," "]}),Object(p.jsx)(ce,{shareModalOpen:j,setShareModalOpen:h})]}),Object(p.jsxs)(ue.a,{children:[Object(p.jsxs)(be.a,{className:e.likes,children:[0===n.post_likeby.length&&"be the first one to like this post!",1===n.post_likeby.length&&"liked by ".concat(n.post_likeby[0]===t.username?"you":n.post_likeby[0]),2===n.post_likeby.length&&"liked by ".concat(n.post_likeby[0]===t.username?"you":n.post_likeby[0],", ").concat(n.post_likeby[1]===t.username?"you":n.post_likeby[1]),n.post_likeby.length>2&&"liked by ".concat(n.post_likeby[0]===t.username?"you":n.post_likeby[0],", ").concat(n.post_likeby[1]===t.username?"you":n.post_likeby[1]," and ").concat(n.post_likeby.length-2," others")]}),Object(p.jsxs)(be.a,{className:e.likes,children:[Object(p.jsxs)(o.b,{to:"/profile/".concat(n.publisher_id),style:{color:"black"},children:[" ",n.publisher_username," "]})," ",Object(p.jsxs)("span",{className:"post-content",children:[" ",n.post_content," "]})]}),Object(p.jsx)(pe.a,{className:e.divider}),n.post_comments.map((function(t){return Object(p.jsxs)(be.a,{className:e.comment,children:[Object(p.jsxs)(R.a,{children:[Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:t.commenter_profile,width:"80"})," "]}),Object(p.jsxs)(o.b,{to:"/profile/".concat(t.commenter_id),style:{color:"black"},children:[" ",Object(p.jsxs)("span",{className:"commeter",children:[t.commenter," "]})," "]}),Object(p.jsx)("span",{className:"post-content",children:t.content})]})})),Object(p.jsx)("div",{className:"post-date",children:n.post_date}),Object(p.jsx)(pe.a,{className:e.divider}),Object(p.jsx)(he.a,{className:e.AddCommenttextField,variant:"outlined",type:"text",label:"Add a comment...",onChange:function(e){return z(e.target.value)},InputProps:{startAdornment:Object(p.jsx)(me.a,{position:"start",children:Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(Te.a,{})]})}),endAdornment:Object(p.jsx)(me.a,{position:"end",children:Object(p.jsx)(T.a,{onClick:function(){return dt(n.post_id,n.index)},color:"primary",children:"Post"})})}})]})]})})})):Object(p.jsx)(f,{}),Object(p.jsx)(Oe.a,{smDown:!0,children:Object(p.jsxs)(ie.a,{item:!0,className:e.suggestion,md:3,children:[Object(p.jsxs)("div",{id:"stepOne",children:[" ",Object(p.jsx)("h6",{className:"user-suggested-headline",children:"Suggestions For You"})," "]}),G&&G.map((function(t){return Object(p.jsx)("div",{children:Object(p.jsx)(le.a,{avatar:Object(p.jsxs)(R.a,{children:[Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:t.profile,width:"70",height:"40",crop:"scale"})," "]}),action:Object(p.jsxs)(A.a,{style:{marginRight:"10px"},onClick:function(){return ht(t.id)},children:[" ",Object(p.jsx)("h6",{className:"user-suggested-follow",children:"Follow"})," "]}),title:Object(p.jsx)(o.b,{to:"/profile/".concat(t.id),children:Object(p.jsx)("span",{className:e.likes,children:t.username})}),subheader:"New to Instagram",style:{width:"110%"}})})}))]})}),Object(p.jsx)(ge.a,{id:"stepTwo",color:"primary",className:e.fab,onClick:function(){return Ve(!0)},title:"Add new post",children:Object(p.jsx)(fe.a,{})}),Object(p.jsxs)(_.a,{size:"lg",centered:!0,show:He,onHide:it,style:{margin:"70px auto 30px",maxHeight:"90%",overflowY:"auto"},children:[Object(p.jsxs)(_.a.Header,{className:e.modalHeader,children:[" ",Object(p.jsx)(_.a.Title,{style:{fontWeight:"700"},children:" Add new post "})," "]}),Object(p.jsx)(_.a.Body,{children:Object(p.jsx)(g.b,{initialValues:{photo:"",content:""},validationSchema:ot,onSubmit:function(e){if(e.fileName=Be,"object"===typeof e.photo){var t=new FileReader;t.readAsDataURL(e.photo),t.onloadend=function(){M(t.result),e.photo=t.result,lt(e)}}else lt(e)},children:function(n){var a=n.errors,s=n.touched,r=n.setFieldValue;return Object(p.jsxs)(g.a,{style:{textAlign:"center"},children:[Object(p.jsx)(C.a,{id:"file",className:"inputfile",type:"file",name:"photo",onChange:function(e){return function(e,t){var n=new FileReader;t("photo",e.target.files[0]),0===e.target.files.length?(ye(!1),Le(""),M("")):(n.readAsDataURL(e.target.files[0]),n.onloadend=function(){M(n.result)},ye(!0),Le(e.target.files[0].name))}(e,r)},hidden:!0}),Object(p.jsxs)(T.a,{className:e.profileBtn,color:"primary",variant:"outlined",children:[Object(p.jsx)(N.a,{className:e.imageIcon}),Object(p.jsxs)("label",{htmlFor:"file",children:[Be?"".concat(Be," UPLOADED"):"UPLPOAD IMAGE"," "]})]}),a.photo&&s.photo?Object(p.jsx)("div",{className:"error",children:a.photo}):null,B?Object(p.jsxs)(oe.a,{className:e.previewcard,children:[Object(p.jsx)(le.a,{avatar:Object(p.jsxs)(R.a,{children:[Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:t.profile,width:"80",crop:"scale"})," "]}),action:Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(Ne.a,{})," "]}),title:Object(p.jsx)("span",{className:e.likes,children:t.username})}),Object(p.jsx)(de.a,{className:e.previewmedia,image:B}),Object(p.jsxs)(je.a,{disableSpacing:!0,children:[Object(p.jsxs)(A.a,{className:e.iconButton,children:[" ",Object(p.jsx)(Ae.a,{style:{fill:"red"}})," "]}),Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(ke.a,{})," "]}),Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(ve.a,{})," "]})]})]}):null,Object(p.jsx)(he.a,{multiline:!0,rows:4,variant:"outlined",margin:"normal",fullWidth:!0,label:"add description",name:"content",onChange:function(e){return r("content",e.target.value)}}),a.content&&s.content?Object(p.jsx)("div",{className:"error",children:a.content}):null,Object(p.jsx)(F.a,{in:De,children:Object(p.jsx)(P.a,{style:{margin:"10px"},severity:w?"error":"success",action:Object(p.jsxs)(A.a,{color:"inherit",size:"small",onClick:function(){return ze(!1)},children:[" ",Object(p.jsx)(k.a,{fontSize:"inherit"})," "]}),children:_e})}),Object(p.jsx)(T.a,{variant:"outlined",color:"primary",type:"Submit",children:"Submit"})]})}})})]})]})})]})},De=n(17),ze=n(559),Je=(n(457),Object(I.a)((function(e){return{paper:{margin:"16px",border:"1px solid lightgrey",padding:e.spacing(1),backgroundColor:"white"},divider:{background:"black"}}})));function We(e){var t=e.users,n=e.anchorEl,a=e.open,s=e.setUsers,r=Je();return Object(p.jsx)("div",{children:t.users&&0!==t.users.length?Object(p.jsx)(ze.a,{open:a,anchorEl:n,style:{width:"300px"},children:Object(p.jsx)("div",{className:r.paper,children:t.users&&t.users.map((function(e){return Object(p.jsx)(o.b,{to:"/profile/".concat(e.id),style:{textDecoration:"none"},onClick:function(){return s([])},children:Object(p.jsxs)("div",{className:"userDiv",children:[Object(p.jsxs)("div",{children:[" ",Object(p.jsx)(v.a,{className:"userimage",cloudName:"malachcloud",publicId:e.profile,width:"60",height:"60",crop:"scale"}),"  "]}),Object(p.jsx)("div",{className:"username",children:e.username})]})})}))})}):null})}var Be=n(498),Le=n(272),Me=n.n(Le),qe=Object(I.a)((function(e){var t;return{search:(t={display:"none"},Object(De.a)(t,e.breakpoints.up("md"),{display:"flex"}),Object(De.a)(t,"position","relative"),Object(De.a)(t,"borderRadius",e.shape.borderRadius),Object(De.a)(t,"backgroundColor","whitesmoke"),Object(De.a)(t,"&:hover",{backgroundColor:"lightgrey"}),Object(De.a)(t,"marginRight",e.spacing(2)),Object(De.a)(t,"marginLeft","0"),Object(De.a)(t,"width","100%"),Object(De.a)(t,e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),t),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(De.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}}));var He=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)([]),c=Object(i.a)(r,2),o=c[0],l=c[1],d=Object(a.useState)(null),j=Object(i.a)(d,2),h=j[0],m=j[1],O=qe(),x=Boolean(h),f=function(){var e=Object(b.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/users/".concat(n));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,l(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f()}),[n]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:O.search,children:[Object(p.jsx)("div",{className:O.searchIcon,children:Object(p.jsx)(Me.a,{})}),Object(p.jsx)(Be.a,{onChange:function(e){return function(e){s(e.target.value),void 0===o.users?(console.log("not"),m(null)):0===o.users.length?m(null):m(e.currentTarget)}(e)},placeholder:"Search\u2026",classes:{root:O.inputRoot,input:O.inputInput}}),Object(p.jsx)(We,{users:o,open:x,anchorEl:h,setUsers:l})]})})},Ve=n(560),Ge=n(561),Ye=n(562),Qe=n(273),Ke=n.n(Qe),Xe=n(161),Ze=n.n(Xe),$e=n(274),et=n.n($e),tt=n(275),nt=n.n(tt),at=Object(I.a)((function(e){var t,n;return{grow:{flexGrow:1,marginBottom:"60px"},appbar:{backgroundColor:"white",color:"black"},title:(t={display:"none"},Object(De.a)(t,e.breakpoints.up("xs"),{display:"flex"}),Object(De.a)(t,"marginRight","35%"),t),search:(n={display:"none"},Object(De.a)(n,e.breakpoints.up("md"),{display:"flex"}),Object(De.a)(n,"position","relative"),Object(De.a)(n,"borderRadius",e.shape.borderRadius),Object(De.a)(n,"backgroundColor","whitesmoke"),Object(De.a)(n,"&:hover",{backgroundColor:"lightgrey"}),Object(De.a)(n,"marginRight",e.spacing(2)),Object(De.a)(n,"marginLeft","0"),Object(De.a)(n,"width","100%"),Object(De.a)(n,e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),n),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(De.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(De.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"})}})),st=function(){var e=JSON.parse(localStorage.getItem("user")),t=at();return Object(p.jsx)(ie.a,{container:!0,children:Object(p.jsx)("div",{className:t.grow,children:Object(p.jsx)(Ve.a,{className:t.appbar,position:"fixed",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)(Ge.a,{style:{background:"white"},children:[Object(p.jsx)(o.b,{to:"/",style:{textDecoration:"none",marginRight:"30%"},children:Object(p.jsx)(be.a,{className:t.title,variant:"h6",noWrap:!0,children:Object(p.jsx)("img",{style:{height:"29px",width:"143px"},src:"https://i.imgur.com/zqpwkLQ.png",alt:"logo"})})}),Object(p.jsx)(He,{}),Object(p.jsx)("div",{className:t.grow}),Object(p.jsxs)("div",{className:t.sectionDesktop,children:[Object(p.jsx)(o.b,{to:"/",style:{textDecoration:"none",color:"black",marginTop:"7px"},children:Object(p.jsx)(A.a,{color:"inherit",children:Object(p.jsx)(Ke.a,{fontSize:"medium"})})}),Object(p.jsx)(o.b,{to:"/chat/0",style:{textDecoration:"none",color:"black",marginTop:"7px"},children:Object(p.jsx)(A.a,{color:"inherit",children:Object(p.jsx)(Ye.a,{badgeContent:4,color:"secondary",children:Object(p.jsx)(Ze.a,{fontSize:"medium"})})})}),Object(p.jsx)(A.a,{color:"inherit",children:Object(p.jsx)(Ye.a,{badgeContent:17,color:"secondary",children:Object(p.jsx)(et.a,{fontSize:"medium"})})}),Object(p.jsx)(o.b,{to:"/profile/".concat(e.id),children:Object(p.jsx)(A.a,{color:"inherit",children:Object(p.jsxs)(R.a,{children:[" ",Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:e.profile,width:"40",height:"40",crop:"scale"}),"  "]})})}),Object(p.jsx)(o.b,{to:"/logout",style:{textDecoration:"none",color:"black",marginTop:"7px"},children:Object(p.jsx)(A.a,{color:"inherit",children:Object(p.jsx)(nt.a,{fontSize:"medium"})})})]})]})})})})})};var rt=function(e){var t=e.setIsAuth,n=Object(l.f)(),s=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!1),localStorage.removeItem("user"),e.next=4,fetch("/auth/logout");case 4:n.push("/signin");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s()}),[]),null},ct=n(109),it=(n(277),n.p+"static/media/insta.3686ea84.png"),ot=n.p+"static/media/slider1.cc488f03.jpg",lt=n.p+"static/media/slider2.678f281f.jpg",dt=n.p+"static/media/slider3.25af168d.jpg",jt=n(575),ut=n(563),bt=n(573),pt=n(564),ht=Object(I.a)((function(e){return{root:{maxWidth:345,margin:"auto",padding:"10px"},large:{width:e.spacing(12),height:e.spacing(12),margin:"auto"}}})),mt=function(e){var t=e.setEmailModal,n=ht(),s=Object(a.useState)(0),r=Object(i.a)(s,2),c=r[0],o=r[1],l=Object(a.useState)(),j=Object(i.a)(l,2),h=j[0],m=j[1],O=function(){o((function(e){return e+1}))},x=function(){o((function(e){return e-1}))},f=function(){return Object(p.jsx)(T.a,{className:"m-3",variant:"contained",onClick:x,children:"back"})},v=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/useremail/".concat(JSON.stringify(N.values.email)));case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent).success&&m(n.user);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/email/".concat(JSON.stringify(t.email)));case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent.success?console.log("email sent"):console.log("email does not sent");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(g.c)({enableReinitialize:!0,initialValues:{email:""},validationSchema:y.a({email:y.c().required("This is required field").email("This is not a valid email")}),onSubmit:function(e,t){t.resetForm;w(e)}});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(jt.a,{activeStep:c,children:["Enter your Email","Verify account","Are You Sure ?","Done"].map((function(e){return Object(p.jsxs)(ut.a,{children:[" ",Object(p.jsx)(bt.a,{children:e})]},e)}))}),Object(p.jsxs)("form",{className:"mt-3 stepper_form text-center",onSubmit:N.handleSumbit,children:[0===c?Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({style:{width:"100%"},name:"email",label:"Enter your email",variant:"outlined"},N.getFieldProps("email")),function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}}(N,"email"))),N.values.email&&!N.errors.email?Object(p.jsx)(T.a,{className:"m-3",variant:"contained",color:"primary",onClick:function(){O(),0===c&&v()},children:"next"}):null]}):null,1===c&&h?Object(p.jsxs)("div",{style:{textAlign:"center"},children:[Object(p.jsxs)(oe.a,{className:n.root,children:[Object(p.jsxs)(pt.a,{children:[Object(p.jsx)(R.a,{alt:"Remy Sharp",src:h.image,className:n.large}),Object(p.jsxs)(ue.a,{children:[Object(p.jsxs)(be.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[h.firstname," ",h.lastname]}),Object(p.jsx)(be.a,{color:"textSecondary",component:"p",children:" Is that you ? "})]})]}),Object(p.jsx)(je.a,{style:{marginLeft:"110px"},children:Object(p.jsx)(T.a,{className:"m-3",variant:"contained",size:"large",color:"primary",onClick:function(){return o((function(e){return e+1}))},children:" Yes "})})]}),f()]}):null,2===c?Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)(T.a,{className:"m-3",variant:"contained",color:"primary",onClick:function(){N.submitForm(),O()},children:" Send me new password"}),f()]}):null,3===c?Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("h5",{children:["Email sent to ",N.values.email]}),Object(p.jsx)(T.a,{className:"m-3",variant:"contained",color:"primary",onClick:function(){return t(!1)},children:" Close "})]}):null]})]})},Ot=n(565),xt=n(287),ft=n(569),gt=n(68),yt=n(91),vt=n.n(yt),wt=n(80),Nt=n.n(wt);n(458);function St(){return Object(p.jsxs)(be.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(p.jsx)(Ot.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var kt=Object(I.a)((function(e){return{root:{marginTop:"20px"},image:{position:"relative",backgroundImage:"url(".concat(it,")"),backgroundRepeat:"no-repeat",alignSelf:"center",backgroundPosition:"0 0",backgroundSize:"454px 618px",flexBasis:"454px",height:"618px"},slider:{width:"54%",margin:"99px 0 0 151px",position:"relative",left:"-3px",bottom:"3px"},formGrid:{marginTop:"70px"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},profileBtn:{paddingTop:"10px",marginTop:"10px",marginBottom:"10px"},imageIcon:{marginBottom:"8px",marginRight:"5px"},submit:{margin:e.spacing(3,0,2)}}})),_t=function(e){var t=e.setIsAuth,n=(Object(ct.b)(),kt()),s=Object(a.useState)(!1),r=Object(i.a)(s,2),c=r[0],o=r[1],j=Object(a.useState)(""),h=Object(i.a)(j,2),m=h[0],O=h[1],x=Object(a.useState)(!1),f=Object(i.a)(x,2),v=f[0],w=f[1],N=Object(a.useState)(!1),S=Object(i.a)(N,2),I=S[0],C=S[1],E=Object(l.f)(),U=Object(g.c)({initialValues:{email:"",password:""},validationSchema:y.a({username:y.c().required("sorry username is required"),password:y.c().required("password is required").min(6,"password have to be at least 6 characters long")}),onSubmit:function(e,t){t.resetForm;D(e)}}),R=function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}},D=function(){var e=Object(b.a)(u.a.mark((function e(n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=e.sent,e.next=6,a.json();case 6:(s=e.sent).success?(localStorage.setItem("user",JSON.stringify(s.user)),t(!0),E.push("/")):(O(s.error),w(!0)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(ie.a,{container:!0,className:n.root,children:[Object(p.jsx)(ie.a,{item:!0,xs:2}),Object(p.jsx)(Oe.a,{mdDown:!0,children:Object(p.jsx)(ie.a,{item:!0,md:4,className:n.image,children:Object(p.jsxs)(gt.a,{fade:!0,className:n.slider,interval:2e3,children:[Object(p.jsx)(gt.a.Item,{children:Object(p.jsx)("img",{className:"d-block w-100",src:ot,alt:"First slide"})}),Object(p.jsx)(gt.a.Item,{children:Object(p.jsx)("img",{className:"d-block w-100",src:lt,alt:" Second slide"})}),Object(p.jsx)(gt.a.Item,{children:Object(p.jsx)("img",{className:"d-block w-100",src:dt,alt:"Third slide"})})]})})}),Object(p.jsx)(ie.a,{item:!0,xs:12,sm:6,md:4,component:xt.a,square:!0,className:n.formGrid,children:Object(p.jsxs)("div",{className:n.paper,children:[Object(p.jsx)("img",{src:"https://i.imgur.com/zqpwkLQ.png",alt:"insta"}),Object(p.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:U.handleSubmit,children:[Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({variant:"outlined",margin:"normal",fullWidth:!0,label:"user name",name:"email",autoFocus:!0},U.getFieldProps("username")),R(U,"username"))),Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({InputProps:{endAdornment:Object(p.jsx)(me.a,{position:"end",children:Object(p.jsxs)(A.a,{onClick:function(){C(!I)},children:[" ",I?Object(p.jsx)(Nt.a,{}):Object(p.jsx)(vt.a,{}),"  "]})})},variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:I?"text":"password"},U.getFieldProps("password")),R(U,"password"))),Object(p.jsx)(F.a,{in:v,children:Object(p.jsx)(P.a,{severity:"error",action:Object(p.jsxs)(A.a,{color:"inherit",size:"small",onClick:function(){return w(!1)},children:[" ",Object(p.jsx)(k.a,{fontSize:"inherit"})," "]}),children:m})}),Object(p.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:" Sign In "}),Object(p.jsxs)(ie.a,{container:!0,children:[Object(p.jsx)(ie.a,{item:!0,xs:!0,children:Object(p.jsx)(Ot.a,{href:"",variant:"body2",onClick:function(){return o(!0)},children:" Forgot password? "})}),Object(p.jsx)(ie.a,{item:!0,children:Object(p.jsx)(Ot.a,{href:"/signup",variant:"body2",children:" Don't have an account? Sign Up "})})]}),Object(p.jsx)(ft.a,{mt:5,children:Object(p.jsx)(St,{})})]})]})}),Object(p.jsx)(ie.a,{item:!0,xs:2}),Object(p.jsxs)(_.a,{size:"lg",centered:!0,show:c,onHide:function(){return o(!1)},children:[Object(p.jsxs)(_.a.Header,{children:[" ",Object(p.jsx)(_.a.Title,{children:" Update your Password "})," "]}),Object(p.jsx)(_.a.Body,{children:Object(p.jsx)(mt,{setEmailModal:o})})]})]})},It=n(284);n(459);function Ct(){return Object(p.jsxs)(be.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(p.jsx)(Ot.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var Tt,Ft=Object(I.a)((function(e){return{root:{marginTop:"20px"},image:{position:"relative",backgroundImage:"url(".concat(it,")"),backgroundRepeat:"no-repeat",alignSelf:"center",backgroundPosition:"0 0",backgroundSize:"454px 618px",flexBasis:"454px",height:"618px"},slider:{width:"54%",margin:"99px 0 0 151px",position:"relative",left:"-3px",bottom:"3px"},formGrid:{marginTop:"70px",margin:"auto"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},profileBtn:{paddingTop:"10px",marginTop:"10px",marginBottom:"10px"},imageIcon:{marginBottom:"8px",marginRight:"5px"},submit:{margin:e.spacing(3,0,2)}}})),At=function(e){var t=e.setIsAuth,n=Object(ct.b)(),s=Ft(),r=Object(a.useRef)(),c=Object(a.useState)(!1),o=Object(i.a)(c,2),j=(o[0],o[1]),h=Object(a.useState)(""),m=Object(i.a)(h,2),O=m[0],x=m[1],f=Object(a.useState)(!1),v=Object(i.a)(f,2),w=v[0],S=v[1],_=Object(a.useState)(!1),I=Object(i.a)(_,2),E=I[0],U=I[1],R=Object(a.useState)(!1),D=Object(i.a)(R,2),z=D[0],J=D[1],W=Object(a.useState)(""),B=Object(i.a)(W,2),L=B[0],M=B[1],q=Object(l.f)(),H=y.a().shape({username:y.c().required("user name is required!"),password:y.c().required("password is required!").min(6,"password have to be at least 6 characters long"),confirmPassword:y.c().required("confirm your password!").oneOf([y.b("password"),null],"Passwords must match"),photo:y.c().required("profile image is required")}),V=function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}},G=function(){U(!E)},Y=function(){J(!z)},Q=function(){var e=Object(b.a)(u.a.mark((function e(a){var s,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.current.getValue();case 3:return s=e.sent,e.next=6,fetch("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(d.a)(Object(d.a)({},a),{},{token:s}))});case 6:return c=e.sent,e.next=9,c.json();case 9:i=e.sent,r.current.reset(),i.user?(localStorage.setItem("user",JSON.stringify(Object(d.a)(Object(d.a)({},i.user),{},{newUser:!0}))),n({type:"AUTH_USER",payload:i.user}),t(!0),q.push("/")):(x(i.error),S(!0)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(ie.a,{container:!0,className:s.root,children:[Object(p.jsxs)(Oe.a,{mdDown:!0,children:[Object(p.jsx)(ie.a,{item:!0,xs:1,md:2}),Object(p.jsx)(ie.a,{item:!0,xs:2,lg:4,className:s.image,children:Object(p.jsxs)(gt.a,{fade:!0,className:s.slider,interval:2e3,children:[Object(p.jsx)(gt.a.Item,{children:Object(p.jsx)("img",{className:"d-block w-100",src:ot,alt:"First slide"})}),Object(p.jsx)(gt.a.Item,{children:Object(p.jsx)("img",{className:"d-block w-100",src:lt,alt:" Second slide"})}),Object(p.jsx)(gt.a.Item,{children:Object(p.jsx)("img",{className:"d-block w-100",src:dt,alt:"Third slide"})})]})})]}),Object(p.jsx)(ie.a,{item:!0,xs:12,md:4,component:xt.a,elevation:6,square:!0,className:s.formGrid,children:Object(p.jsxs)("div",{className:s.paper,children:[Object(p.jsx)("img",{src:"https://i.imgur.com/zqpwkLQ.png",alt:"logo"}),Object(p.jsx)(g.b,{initialValues:{username:"",password:"",photo:""},onSubmit:function(e,t){t.resetForm;return function(e){if(e.fileName=L,"object"===typeof e.photo){var t=new FileReader;t.readAsDataURL(e.photo),t.onloadend=function(){e.photo=t.result,Q(e)}}else Q(e)}(e)},validationSchema:H,enableReinitialize:!0,children:function(e){return Object(p.jsxs)("form",{style:{textAlign:"center"},onSubmit:e.handleSubmit,autoComplete:"off",children:[Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({name:"username",label:"User name",variant:"outlined",fullWidth:!0},e.getFieldProps("username")),V(e,"username"))),Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({InputProps:{endAdornment:Object(p.jsx)(me.a,{position:"end",children:Object(p.jsxs)(A.a,{onClick:G,children:[" ",E?Object(p.jsx)(Nt.a,{}):Object(p.jsx)(vt.a,{}),"  "]})})},type:E?"text":"password",variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password"},e.getFieldProps("password")),V(e,"password"))),Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({InputProps:{endAdornment:Object(p.jsx)(me.a,{position:"end",children:Object(p.jsxs)(A.a,{onClick:Y,children:[" ",z?Object(p.jsx)(Nt.a,{}):Object(p.jsx)(vt.a,{}),"  "]})})},type:z?"text":"password",variant:"outlined",margin:"normal",fullWidth:!0,name:"confirmPassword",label:"Confirm Password"},e.getFieldProps("confirmPassword")),V(e,"confirmPassword"))),Object(p.jsx)(C.a,{id:"file",className:"inputfile",type:"file",name:"photo",onChange:function(t){return function(e,t){t("photo",e.target.files[0]),0===e.target.files.length?(j(!1),M("")):(j(!0),M(e.target.files[0].name))}(t,e.setFieldValue)},hidden:!0}),Object(p.jsxs)(T.a,{style:{display:"flex",alignItems:"center",margin:"5px 0px"},color:"primary",variant:"outlined",children:[Object(p.jsx)("div",{style:{marginRight:"7px"},children:Object(p.jsx)(N.a,{})}),Object(p.jsxs)("label",{htmlFor:"file",children:[L?"".concat(L," UPLOADED"):"PROFILE IMAGE"," "]})]}),e.errors.photo&&e.touched.photo?Object(p.jsx)("div",{className:"error",children:e.errors.photo}):null,Object(p.jsx)(It.a,{style:{margin:"10px 0px"},sitekey:"6LfruZ4aAAAAAAFNEQG6lPJLbJVjEThKg2DJdjEi",ref:r}),Object(p.jsx)(F.a,{in:w,children:Object(p.jsx)(P.a,{severity:"error",action:Object(p.jsxs)(A.a,{color:"inherit",size:"small",onClick:function(){return S(!1)},children:[" ",Object(p.jsx)(k.a,{fontSize:"inherit"})," "]}),children:O})}),Object(p.jsx)(T.a,{className:"my-3",variant:"contained",color:"primary",type:"submit",size:"large",fullWidth:!0,children:" Sign up "}),Object(p.jsx)(ie.a,{container:!0,children:Object(p.jsx)(ie.a,{item:!0,children:Object(p.jsx)(Ot.a,{href:"/signin",variant:"body2",children:" Already have an account? Sign In "})})}),Object(p.jsx)(ft.a,{mt:5,children:Object(p.jsx)(Ct,{})})]})}})]})}),Object(p.jsx)(ie.a,{item:!0,xs:2})]})},Pt=n(566),Et=n(567),Ut=(n(460),function(e){var t=e.imageModal,n=e.setImageModal,a=e.modalImage;return console.log(a),Object(p.jsx)(p.Fragment,{children:a&&Object(p.jsx)(_.a,{show:t,onHide:function(){return n(!1)},dialogClassName:"modal-90w",className:"modal","aria-labelledby":"example-custom-modal-styling-title",children:Object(p.jsx)(_.a.Body,{className:"show-grid",children:Object(p.jsxs)(Pt.a,{children:[Object(p.jsx)(Et.a,{xs:12,md:8,children:Object(p.jsx)("div",{className:"modal_image_div",children:Object(p.jsx)("img",{className:"modal_image",alt:"modal",src:a.photo})})}),Object(p.jsx)(Et.a,{xs:4,children:Object(p.jsxs)("div",{className:"modal_post_details",children:[Object(p.jsxs)("div",{className:"modal_post_user",children:[Object(p.jsxs)(R.a,{style:{height:"42px",width:"42px"},children:["  ",Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:a.owner_photo,width:"42",height:"42",crop:"scale"}),"  "]}),Object(p.jsxs)("h6",{className:"modal_post_user_header",children:[a.owner_username," ",Object(p.jsx)("span",{className:"comment-date",children:a.date})]})]}),Object(p.jsx)(pe.a,{}),Object(p.jsxs)("div",{className:"modal_post_user",children:[Object(p.jsxs)(R.a,{style:{height:"42px",width:"42px"},children:["  ",Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:a.owner_photo,width:"42",height:"42",crop:"scale"}),"  "]}),Object(p.jsx)("h6",{className:"modal_post_user_header",children:a.owner_username}),Object(p.jsx)("p",{className:"modal_post_content",children:a.content})]}),0!==a.comments.length&&a.comments.map((function(e){return Object(p.jsxs)("div",{className:"modal_post_user",children:[Object(p.jsxs)(R.a,{style:{height:"42px",width:"42px"},children:["  ",Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:e.User.profile,width:"42",height:"42",crop:"scale"}),"  "]}),Object(p.jsxs)("h6",{className:"modal_post_user_header",children:[e.User.username," ",Object(p.jsx)("span",{className:"comment-date",children:e.time})]}),Object(p.jsx)("p",{className:"modal_post_content",children:e.content})]})})),Object(p.jsx)(pe.a,{}),Object(p.jsxs)("div",{children:[Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(Ae.a,{}),"  "]}),Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(ke.a,{})," "]}),Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(ve.a,{})," "]})]}),Object(p.jsxs)("p",{className:"like_p",children:["Liked by ",a.likes," pepole"]})]})})]})})})})}),Rt=function(e){var t=e.modal,n=e.setModal,s=JSON.parse(localStorage.getItem("user")).id,r=Object(a.useState)(""),c=Object(i.a)(r,2),o=c[0],l=c[1],j=Object(a.useState)(!1),h=Object(i.a)(j,2),m=h[0],O=h[1],x=Object(a.useState)(""),f=Object(i.a)(x,2),v=f[0],w=f[1],S=Object(a.useState)(""),I=Object(i.a)(S,2),E=(I[0],I[1]),U=Object(a.useState)(!1),R=Object(i.a)(U,2),D=(R[0],R[1]),z=Object(a.useState)({username:"",password:"",description:""}),J=Object(i.a)(z,2),W=J[0],B=J[1],L=Object(a.useState)(!1),M=Object(i.a)(L,2),q=M[0],H=M[1],V=y.a().shape({username:y.c().required("username is required"),password:y.c().required("password is required"),description:y.c().min(6,"That it? write some more(min 6 characters)")}),G=function(e,t){return{error:!(!e.errors[t]||!e.touched[t]),helperText:e.errors[t]&&e.touched[t]?e.errors[t]:null}},Y=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n,a,r,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/".concat(s));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.user,r=a.username,c=a.password,i=a.profileFileName,o=a.profileDescription,B({username:r,password:c,description:o,photo:""}),w(i);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(u.a.mark((function e(t,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(d.a)(Object(d.a)({},t),{},{id:s,fileName:v}))});case 2:return r=e.sent,e.next=5,r.json();case 5:(c=e.sent).user?(localStorage.setItem("user",JSON.stringify(c.user)),a(),n(!1)):(l(c.error),O(!0));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){H(!q)};return Object(a.useEffect)((function(){Y()}),[]),Object(p.jsx)("div",{children:Object(p.jsxs)(_.a,{size:"lg",centered:!0,show:t,onHide:function(){return n(!1)},children:[Object(p.jsxs)(_.a.Header,{className:"",children:[" ",Object(p.jsx)(_.a.Title,{style:{fontWeight:"700",margin:"auto"},children:" Edit your profile "})," "]}),Object(p.jsx)(_.a.Body,{children:Object(p.jsx)(g.b,{initialValues:W,onSubmit:function(e,t){return function(e,t){if(e.fileName=v,"object"===typeof e.photo){var n=new FileReader;n.readAsDataURL(e.photo),n.onloadend=function(){e.photo=n.result,Q(e,t)}}else Q(e,t)}(e,t.resetForm)},validationSchema:V,enableReinitialize:!0,children:function(e){return Object(p.jsxs)("form",{style:{textAlign:"center"},onSubmit:e.handleSubmit,autoComplete:"off",children:[Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({name:"username",label:"User name",variant:"outlined",fullWidth:!0},e.getFieldProps("username")),G(e,"username"))),Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({InputProps:{endAdornment:Object(p.jsx)(me.a,{position:"end",children:Object(p.jsxs)(A.a,{onClick:K,children:[" ",q?Object(p.jsx)(Nt.a,{}):Object(p.jsx)(vt.a,{}),"  "]})})},type:q?"text":"password",variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password"},e.getFieldProps("password")),G(e,"password"))),Object(p.jsx)(he.a,Object(d.a)(Object(d.a)({multiline:!0,rows:4,variant:"outlined",margin:"normal",fullWidth:!0,label:"add profile description",name:"description"},e.getFieldProps("description")),G(e,"description"))),Object(p.jsx)(C.a,{id:"file",className:"inputfile",type:"file",name:"photo",onChange:function(t){return function(e,t){var n=new FileReader;t("photo",e.target.files[0]),0===e.target.files.length?(D(!1),w(""),E("")):(n.readAsDataURL(e.target.files[0]),n.onloadend=function(){E(n.result)},D(!0),w(e.target.files[0].name))}(t,e.setFieldValue)},hidden:!0}),Object(p.jsxs)(T.a,{style:{display:"block",margin:"5px 0px"},color:"primary",variant:"outlined",children:[Object(p.jsx)(N.a,{className:""}),Object(p.jsxs)("label",{htmlFor:"file",children:[v?"".concat(v," UPLOADED"):"IMAGE PROFILE"," "]})]}),e.errors.photo&&e.touched.photo?Object(p.jsx)("div",{className:"error",children:e.errors.photo}):null,Object(p.jsx)(F.a,{in:m,children:Object(p.jsx)(P.a,{severity:"error",action:Object(p.jsxs)(A.a,{color:"inherit",size:"small",onClick:function(){return O(!1)},children:[" ",Object(p.jsx)(k.a,{fontSize:"inherit"})," "]}),children:o})}),Object(p.jsx)(T.a,{className:"my-3",variant:"contained",color:"primary",type:"submit",size:"large",children:" Update user "})]})}})})]})})},Dt=n(278),zt=n.n(Dt),Jt=n(279),Wt=n.n(Jt),Bt=(n(461),function(e){var t=e.match.params.id,n=Object(a.useState)(""),s=Object(i.a)(n,2),r=s[0],c=s[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),d=l[0],j=l[1],h=Object(a.useState)(!0),m=Object(i.a)(h,2),O=m[0],x=m[1],g=Object(a.useState)(!1),y=Object(i.a)(g,2),w=y[0],N=y[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),_=k[0],I=k[1],C=Object(a.useState)(!1),T=Object(i.a)(C,2),F=T[0],A=T[1],P=Object(a.useState)(!1),E=Object(i.a)(P,2),U=E[0],R=E[1],D=Object(a.useState)(""),z=Object(i.a)(D,2),J=z[0],W=z[1],B=Object(a.useState)(""),L=Object(i.a)(B,2),M=L[0],q=L[1],H=JSON.parse(localStorage.getItem("user")),V=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,c(a.user);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,s,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,s=a.postArr,r=a.numberOfFollowers,c=a.numberOfFollowing,console.log(s),W(r),q(c),console.log(s),j(s);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=10;break}return e.next=3,fetch("/user/unfollow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userWhoWantstoUnfollow:H.id,userWhoGetsUnfollowed:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent.success&&(R(!1),W(J-1),H.Followings=H.Followings.filter((function(e){return Number(e.followed_id)!==Number(t)})),localStorage.setItem("user",JSON.stringify(H))),e.next=17;break;case 10:return e.next=12,fetch("/user/follow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userWhoWantToFollow:H.id,userWhoGetsFollower:t})});case 12:return a=e.sent,e.next=15,a.json();case 15:e.sent.success&&(W(J+1),H.Followings.push({UserId:Number(H.id),followed_id:Number(t)}),localStorage.setItem("user",JSON.stringify(H)),R(!0));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){V(),G(),Number(t)===Number(JSON.parse(localStorage.getItem("user")).id)?A(!0):A(!1),H.Followings.find((function(e){return Number(e.followed_id)===Number(t)}))?R(!0):(console.log(!1),R(!1))}),[w,t]),Object(p.jsxs)(p.Fragment,{children:[d&&r?Object(p.jsxs)("div",{className:"profile-main",children:[Object(p.jsx)("header",{children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"profile",style:{margin:"0px"},children:[Object(p.jsx)("div",{className:"profile-image",children:Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:r.profile,width:"200",crop:"scale"})}),Object(p.jsxs)("div",{className:"profile-user-settings",children:[Object(p.jsxs)("h2",{className:"profile-user-name",children:[" ",r.username," "]}),F?Object(p.jsx)("button",{className:"btn profile-edit-btn",onClick:function(){return N(!0)},children:"Edit Profile"}):Object(p.jsx)("button",{className:"btn profile-edit-btn",onClick:function(){return Y()},children:U?"Unfollow":"Follow"}),Object(p.jsx)("button",{className:"btn profile-settings-btn",children:Object(p.jsx)(zt.a,{})})]}),Object(p.jsx)("div",{className:"profile-stats",children:Object(p.jsxs)("ul",{style:{padding:"10px 2px 3px"},children:[Object(p.jsxs)("li",{children:[Object(p.jsx)("span",{className:"profile-stat-count",children:d.length})," posts"]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("span",{className:"profile-stat-count",children:J})," followers"]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("span",{className:"profile-stat-count",children:M})," following"]})]})}),Object(p.jsx)("div",{className:"profile-bio",children:Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{className:"profile-real-name",children:r.username})," ",r.profileDescription," \ud83d\udcf7\u2708\ufe0f\ud83c\udfd5\ufe0f"]})})]})})}),Object(p.jsx)("main",{children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"gallery",children:Object(p.jsx)(ie.a,{container:!0,children:0!==d.length?d.slice(0).reverse().map((function(e){return Object(p.jsx)(ie.a,{item:!0,xs:4,onClick:function(){return function(e){I(e),x(!0)}(e)},children:Object(p.jsxs)("div",{className:"gallery-item",tabIndex:"0",children:[Object(p.jsx)("img",{src:e.photo,className:"gallery-image",alt:""}),Object(p.jsx)("div",{className:"gallery-item-info",children:Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{className:"gallery-item-likes",children:[Object(p.jsx)("span",{className:"visually-hidden",children:"Likes:"})," ",Object(p.jsx)(Ae.a,{})," ",e.likes]}),Object(p.jsxs)("li",{className:"gallery-item-comments",children:[Object(p.jsx)("span",{className:"visually-hidden",children:"Comments:"}),Object(p.jsx)(Wt.a,{})," ",e.comments.length]})]})})]})})})):Object(p.jsxs)("div",{className:"no_post_div",children:[Object(p.jsx)("h1",{children:"No posts yet"}),Object(p.jsx)("p",{children:"Go back to the home page and upload some.."})]})})})})})]}):Object(p.jsx)(f,{}),Object(p.jsx)(Rt,{modal:w,setModal:N}),Object(p.jsx)(Ut,{imageModal:O,setImageModal:x,modalImage:_})]})}),Lt=n(282),Mt=n.n(Lt),qt=n(280),Ht=n.n(qt),Vt=(n(240),n(281)),Gt=n.n(Vt),Yt=Object(I.a)((function(e){return{likes:{color:"#262626",fontSize:"14px",fontWeight:"600"},AddCommenttextField:{flexBasis:280,margin:"20px 2px",width:"99%",padding:"1% 0%"}}})),Qt=function(e){var t=e.user,n=e.location,s=Object(a.useState)(""),r=Object(i.a)(s,2),c=r[0],l=r[1],j=Object(a.useState)(""),h=Object(i.a)(j,2),O=h[0],x=h[1],f=Object(a.useState)(""),g=Object(i.a)(f,2),y=g[0],w=g[1],N=Object(a.useRef)(),S=JSON.parse(localStorage.getItem("user")),k=Yt(),_={"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]},I=function(){var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},C=function(){var e=Object(b.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!y){e.next=7;break}return Tt.emit("sendMessage",{name:O,message:y},(function(){return w("")})),e.next=5,fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserId:S.id,reciver_id:t.id,sender_id:S.id,content:y})});case 5:return e.next=7,fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserId:t.id,reciver_id:t.id,sender_id:S.id,content:y})});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){(Tt=Gt()("localhost:3001",_)).emit("join",{id:S.id})}),[]),Object(a.useEffect)((function(){Tt.on("message",(function(e){l([].concat(Object(m.a)(c),[e])),setTimeout((function(){return I()}),400)})),Tt.on("locationMessage",(function(e){l([].concat(Object(m.a)(c),[Object(d.a)(Object(d.a)({},e),{},{location:!0})])),w(""),setTimeout((function(){return I()}),400)}))}),[c]);var F=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/message/conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserId:S.id,partnerId:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,s=a.messages,l(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(setTimeout((function(){return I()}),400),t){var e=Ht.a.parse(n.search).chatwith;x(e),F()}}),[t]),Object(p.jsxs)("div",{className:"base-container",children:[Object(p.jsxs)("div",{style:{position:"sticky",top:"0"},children:[Object(p.jsx)(le.a,{avatar:Object(p.jsxs)(R.a,{style:{height:"56px",width:"56px"},children:[Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:t.profile,width:"56",height:"56",crop:"scale"})," "]}),title:Object(p.jsx)(o.b,{to:"/profile",children:Object(p.jsx)("span",{className:k.likes,children:t.username})}),subheader:"Active 2 hours ago"}),Object(p.jsx)(pe.a,{})]}),Object(p.jsxs)("div",{className:"messages_div",children:[c&&c.map((function(e,t){return Object(p.jsx)("div",{className:e.sender_id===S.id?"my-text-div":"friend-text-div",children:Object(p.jsx)("div",{className:e.sender_id===S.id?"my-text-container":"friend-text-div",children:Object(p.jsx)("div",{className:e.sender_id===S.id?"my-text":"friend-text",children:e.location?Object(p.jsx)("a",{target:"_blank",rel:"noreferrer",href:e.content,children:"My location"}):e.content})})},t)})),Object(p.jsx)("div",{ref:N})]}),Object(p.jsx)(he.a,{onKeyPress:function(e){return"Enter"===e.key?C(e):null},onChange:function(e){return w(e.target.value)},value:y,className:k.AddCommenttextField,variant:"outlined",type:"text",label:"Message",InputProps:{startAdornment:Object(p.jsx)(me.a,{position:"start",children:Object(p.jsxs)(A.a,{children:[" ",Object(p.jsx)(Te.a,{})]})}),endAdornment:Object(p.jsxs)(me.a,{position:"end",children:[Object(p.jsxs)(T.a,{onClick:function(){if(!navigator.geolocation)return alert("Your broswer not supported geolocation");navigator.geolocation.getCurrentPosition((function(e){Tt.emit("sendLocation",{latitude:e.coords.latitude,longitude:e.coords.longitude,name:O},Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserId:S.id,reciver_id:t.id,sender_id:S.id,content:y})});case 2:return e.next=4,fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserId:t.id,reciver_id:t.id,sender_id:S.id,content:y})});case 4:case"end":return e.stop()}}),e)}))))}))},children:[" ",Object(p.jsx)(Mt.a,{style:{padding:"0px"}})," "]}),Object(p.jsx)(T.a,{onClick:function(e){return C(e)},color:"primary",children:"Send"})]})}})]})},Kt=function(){return Object(p.jsxs)("div",{className:"blank_div",children:[Object(p.jsx)("span",{class:"dot",children:Object(p.jsx)("div",{className:"blank_image",children:Object(p.jsx)(Ze.a,{style:{fontSize:120}})})}),Object(p.jsx)("h4",{children:"Your Messages"}),Object(p.jsxs)("p",{className:"blank_p",children:[" Click on the user you want to chat with! ",Object(p.jsx)("br",{}),"Send private photos and messages to a friend or group. "]})]})},Xt=Object(I.a)((function(e){return{likes:{color:"#262626",fontSize:"14px",fontWeight:"600"},users:{cursor:"pointer","&:hover":{background:"whitesmoke"}}}})),Zt=function(e){var t=e.setUserChanged,n=e.userChanged,s=JSON.parse(localStorage.getItem("user")),r=Xt(),c=Object(a.useState)(""),l=Object(i.a)(c,2),d=l[0],j=l[1],h=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/follow/".concat(s.id));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.users,j(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"users_header",children:Object(p.jsx)("h6",{children:s.username})}),Object(p.jsx)(pe.a,{}),Object(p.jsx)("div",{className:"base-container",children:d&&d.map((function(e,a){return Object(p.jsx)(o.b,{to:"/chat/".concat(e.id,"?chatwith=").concat(e.username),children:Object(p.jsx)(le.a,{onClick:function(){return t(!n)},avatar:Object(p.jsxs)(R.a,{style:{height:"56px",width:"56px"},children:[Object(p.jsx)(v.a,{cloudName:"malachcloud",publicId:e.profile,width:"56",height:"56",crop:"scale"})," "]}),title:Object(p.jsx)("span",{className:r.likes,children:e.username}),subheader:"Active 2 hours ago",className:r.users})},a)}))})]})},$t=function(e){var t=e.match.params.id,n=e.location,s=Object(a.useState)(""),r=Object(i.a)(s,2),c=r[0],o=r[1],l=Object(a.useState)(!1),d=Object(i.a)(l,2),j=d[0],h=d[1],m=function(){var e=Object(b.a)(u.a.mark((function e(){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,s=a.user,o(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){m()}),[j]),Object(p.jsx)("div",{className:"container pt-4",children:Object(p.jsxs)(ie.a,{container:!0,style:{backgroundColor:"whitesmoke",minHeight:"600px",border:"1px solid lightgrey"},children:[Object(p.jsx)(ie.a,{item:!0,xs:6,style:{border:"1px solid lightgrey"},children:Object(p.jsx)(Zt,{userChanged:j,setUserChanged:h})}),Object(p.jsx)(ie.a,{item:!0,xs:6,children:c&&null!==c?Object(p.jsx)(Qt,{user:c,location:n}):Object(p.jsx)(Kt,{})})]})})},en=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(o.a,{children:[n&&Object(p.jsx)(st,{}),Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{path:"/chat/:id",component:$t}),Object(p.jsx)(l.a,{path:"/profile/:id",component:h(Bt,s)}),Object(p.jsx)(l.a,{path:"/logout",render:function(){return Object(p.jsx)(rt,{setIsAuth:s})}}),Object(p.jsx)(l.a,{path:"/signin",render:function(){return Object(p.jsx)(_t,{setIsAuth:s})}}),Object(p.jsx)(l.a,{path:"/signup",render:function(){return Object(p.jsx)(At,{setIsAuth:s})}}),Object(p.jsx)(l.a,{path:"/",component:h(Re,s)})]})]})})},tn=(n(493),n(84)),nn=n(283);var an=Object(tn.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),t.payload)});default:return e}}}),sn=function(){var e="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||tn.d;return Object(tn.e)(an,e(Object(tn.a)(nn.a)))};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(ct.a,{store:sn(),children:Object(p.jsx)(en,{})})}),document.getElementById("root"))}},[[494,1,2]]]);
//# sourceMappingURL=main.e87c5157.chunk.js.map