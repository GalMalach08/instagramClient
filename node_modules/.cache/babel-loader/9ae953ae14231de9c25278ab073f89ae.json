{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import InstaPhoto from'../../images/insta.png';import Slider1 from'../../images/slider1.jpg';import Slider2 from'../../images/slider2.jpg';import Slider3 from'../../images/slider3.jpg';import Grid from'@material-ui/core/Grid';import ReCaptcha from'react-google-recaptcha';import{Formik,Form}from'formik';import{Input}from'@material-ui/core';import*as Yup from'yup';import{TextField,Button}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import Link from'@material-ui/core/Link';import Paper from'@material-ui/core/Paper';import Box from'@material-ui/core/Box';import Typography from'@material-ui/core/Typography';import Carousel from'react-bootstrap/Carousel';import ImageIcon from'@material-ui/icons/Image';import{Hidden}from'@material-ui/core';import Collapse from'@material-ui/core/Collapse';import CloseIcon from'@material-ui/icons/Close';import IconButton from'@material-ui/core/IconButton';import Alert from'@material-ui/lab/Alert';import InputAdornment from\"@material-ui/core/InputAdornment\";import VisibilityIcon from'@material-ui/icons/Visibility';import VisibilityOffIcon from'@material-ui/icons/VisibilityOff';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Copyright(){return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\",children:['Copyright © ',/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"https://material-ui.com/\",children:\"Your Website\"}),' ',new Date().getFullYear(),'.']});}var useStyles=makeStyles(function(theme){return{root:{marginTop:'20px'},image:{position:'relative',backgroundImage:\"url(\".concat(InstaPhoto,\")\"),backgroundRepeat:'no-repeat',alignSelf:'center',backgroundPosition:'0 0',backgroundSize:'454px 618px',flexBasis:'454px',height:'618px'},slider:{width:'54%',margin:'99px 0 0 151px',position:'relative',left:'-3px',bottom:'3px'},formGrid:{marginTop:'70px',margin:'auto'},paper:{margin:theme.spacing(8,4),display:'flex',flexDirection:'column',alignItems:'center'},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:'100%',marginTop:theme.spacing(1)},profileBtn:{paddingTop:'10px',marginTop:'10px',marginBottom:'10px'},imageIcon:{marginBottom:'8px',marginRight:'5px'},submit:{margin:theme.spacing(3,0,2)}};});var SignUp=function SignUp(_ref){var setIsAuth=_ref.setIsAuth;var dispatch=useDispatch();var classes=useStyles();var reRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isProfile=_useState2[0],setIsProfile=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openAlert=_useState6[0],setOpenAlert=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPassword=_useState8[0],setShowPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showConfirmPassword=_useState10[0],setShowConfirmPassword=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),fileName=_useState12[0],setFileName=_useState12[1];var history=useHistory();// Form validation\nvar validationSchema=Yup.object().shape({username:Yup.string().required('user name is required!'),password:Yup.string().required('password is required!').min(6,'password have to be at least 6 characters long'),confirmPassword:Yup.string().required('confirm your password!').oneOf([Yup.ref('password'),null],'Passwords must match'),photo:Yup.string().required('profile image is required')});var errorHelper=function errorHelper(formik,values){return{error:formik.errors[values]&&formik.touched[values]?true:false,helperText:formik.errors[values]&&formik.touched[values]?formik.errors[values]:null};};// Handle password visiblity \nvar handleClickShowPassword=function handleClickShowPassword(){setShowPassword(!showPassword);};var handleClickConfirmPassword=function handleClickConfirmPassword(){setShowConfirmPassword(!showConfirmPassword);};var handleChangeImage=function handleChangeImage(e,setFieldValue){setFieldValue(\"photo\",e.target.files[0]);if(e.target.files.length===0){setIsProfile(false);setFileName('');}else{setIsProfile(true);setFileName(e.target.files[0].name);}};// Edit the profile image\nvar editProfile=function editProfile(values){values.fileName=fileName;if(typeof values.photo==='object'){var reader=new FileReader();reader.readAsDataURL(values.photo);reader.onloadend=function(){values.photo=reader.result;signUpUser(values);};}else{signUpUser(values);}};// Add new user\nvar signUpUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var token,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return reRef.current.getValue();case 3:token=_context.sent;_context.next=6;return fetch('/auth/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},values),{},{token:token}))});case 6:response=_context.sent;_context.next=9;return response.json();case 9:data=_context.sent;reRef.current.reset();if(data.user){localStorage.setItem('user',JSON.stringify(_objectSpread(_objectSpread({},data.user),{},{newUser:true})));dispatch({type:'AUTH_USER',payload:data.user});setIsAuth(true);history.push('/');}else{setMessage(data.error);setOpenAlert(true);}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function signUpUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.root,children:[/*#__PURE__*/_jsxs(Hidden,{mdDown:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:1,md:2}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,lg:4,className:classes.image,children:/*#__PURE__*/_jsxs(Carousel,{fade:true,className:classes.slider,interval:2000,children:[/*#__PURE__*/_jsx(Carousel.Item,{children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block w-100\",src:Slider1,alt:\"First slide\"})}),/*#__PURE__*/_jsx(Carousel.Item,{children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block w-100\",src:Slider2,alt:\" Second slide\"})}),/*#__PURE__*/_jsx(Carousel.Item,{children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block w-100\",src:Slider3,alt:\"Third slide\"})})]})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,component:Paper,elevation:6,square:true,className:classes.formGrid,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://i.imgur.com/zqpwkLQ.png\",alt:\"logo\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{username:'',password:'',photo:''},onSubmit:function onSubmit(values,_ref3){var resetForm=_ref3.resetForm;return editProfile(values,resetForm);},validationSchema:validationSchema,enableReinitialize:true,children:function children(props){return/*#__PURE__*/_jsxs(\"form\",{style:{textAlign:'center'},onSubmit:props.handleSubmit,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({name:\"username\",label:\"User name\",variant:\"outlined\",fullWidth:true},props.getFieldProps('username')),errorHelper(props,'username'))),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsxs(IconButton,{onClick:handleClickShowPassword,children:[\" \",showPassword?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{}),\"  \"]})})},type:showPassword?\"text\":\"password\",variant:\"outlined\",margin:\"normal\",fullWidth:true,name:\"password\",label:\"Password\"},props.getFieldProps('password')),errorHelper(props,'password'))),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsxs(IconButton,{onClick:handleClickConfirmPassword,children:[\" \",showConfirmPassword?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{}),\"  \"]})})},type:showConfirmPassword?\"text\":\"password\",variant:\"outlined\",margin:\"normal\",fullWidth:true,name:\"confirmPassword\",label:\"Confirm Password\"},props.getFieldProps('confirmPassword')),errorHelper(props,'confirmPassword'))),/*#__PURE__*/_jsx(Input,{id:\"file\",className:\"inputfile\",type:\"file\",name:\"photo\",onChange:function onChange(e){return handleChangeImage(e,props.setFieldValue);},hidden:true}),/*#__PURE__*/_jsxs(Button,{style:{display:'flex',alignItems:'center',margin:'5px 0px'},color:\"primary\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(\"div\",{style:{marginRight:'7px'},children:/*#__PURE__*/_jsx(ImageIcon,{})}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",children:[fileName?\"\".concat(fileName,\" UPLOADED\"):'PROFILE IMAGE',\" \"]})]}),props.errors.photo&&props.touched.photo?/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:props.errors.photo}):null,/*#__PURE__*/_jsx(ReCaptcha,{style:{margin:'10px 0px'},sitekey:\"6LfruZ4aAAAAAAFNEQG6lPJLbJVjEThKg2DJdjEi\",ref:reRef}),/*#__PURE__*/_jsx(Collapse,{in:openAlert,children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",action:/*#__PURE__*/_jsxs(IconButton,{color:\"inherit\",size:\"small\",onClick:function onClick(){return setOpenAlert(false);},children:[\" \",/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"inherit\"}),\" \"]}),children:message})}),/*#__PURE__*/_jsx(Button,{className:\"my-3\",variant:\"contained\",color:\"primary\",type:\"submit\",size:\"large\",fullWidth:true,children:\" Sign up \"}),/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Link,{href:\"/signin\",variant:\"body2\",children:\" Already have an account? Sign In \"})})}),/*#__PURE__*/_jsx(Box,{mt:5,children:/*#__PURE__*/_jsx(Copyright,{})})]});}})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2})]});};export default SignUp;","map":{"version":3,"sources":["C:/Users/מלאך גל/Desktop/Projects/Instagram-master/client/src/components/signup/SignUp.js"],"names":["React","useState","useRef","useDispatch","useHistory","InstaPhoto","Slider1","Slider2","Slider3","Grid","ReCaptcha","Formik","Form","Input","Yup","TextField","Button","makeStyles","Link","Paper","Box","Typography","Carousel","ImageIcon","Hidden","Collapse","CloseIcon","IconButton","Alert","InputAdornment","VisibilityIcon","VisibilityOffIcon","Copyright","Date","getFullYear","useStyles","theme","root","marginTop","image","position","backgroundImage","backgroundRepeat","alignSelf","backgroundPosition","backgroundSize","flexBasis","height","slider","width","margin","left","bottom","formGrid","paper","spacing","display","flexDirection","alignItems","avatar","backgroundColor","palette","secondary","main","form","profileBtn","paddingTop","marginBottom","imageIcon","marginRight","submit","SignUp","setIsAuth","dispatch","classes","reRef","isProfile","setIsProfile","message","setMessage","openAlert","setOpenAlert","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","fileName","setFileName","history","validationSchema","object","shape","username","string","required","password","min","confirmPassword","oneOf","ref","photo","errorHelper","formik","values","error","errors","touched","helperText","handleClickShowPassword","handleClickConfirmPassword","handleChangeImage","e","setFieldValue","target","files","length","name","editProfile","reader","FileReader","readAsDataURL","onloadend","result","signUpUser","current","getValue","token","fetch","method","headers","body","JSON","stringify","response","json","data","reset","user","localStorage","setItem","newUser","type","payload","push","console","resetForm","props","textAlign","handleSubmit","getFieldProps","endAdornment"],"mappings":"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","sourcesContent":["import React,{ useState, useRef } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport InstaPhoto from '../../images/insta.png'\nimport Slider1 from '../../images/slider1.jpg'\nimport Slider2 from '../../images/slider2.jpg'\nimport Slider3 from '../../images/slider3.jpg'\nimport Grid from '@material-ui/core/Grid';\nimport ReCaptcha from 'react-google-recaptcha'\nimport { Formik, Form} from 'formik';\nimport {Input } from '@material-ui/core'\nimport * as Yup from 'yup';\nimport {TextField, Button} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport Carousel from 'react-bootstrap/Carousel'\nimport ImageIcon from '@material-ui/icons/Image';\nimport { Hidden } from '@material-ui/core';\nimport Collapse from '@material-ui/core/Collapse';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport Alert from '@material-ui/lab/Alert';\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport './style.css'\n\nfunction Copyright() {\n    return (\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n        {'Copyright © '}\n        <Link color=\"inherit\" href=\"https://material-ui.com/\">\n          Your Website\n        </Link>{' '}\n        {new Date().getFullYear()}\n        {'.'}\n      </Typography>\n    );\n  }\n  \n\n  const useStyles = makeStyles((theme) => ({\n    root: {\n      marginTop:'20px'\n    },\n    image: {\n      position:'relative',\n      backgroundImage: `url(${InstaPhoto})`,\n      backgroundRepeat: 'no-repeat',\n      alignSelf: 'center',\n      backgroundPosition: '0 0',\n      backgroundSize: '454px 618px',\n      flexBasis: '454px',\n      height: '618px',\n    \n    },\n    slider: {\n      width:'54%',\n      margin: '99px 0 0 151px',\n      position: 'relative',\n      left:'-3px',\n      bottom: '3px'\n    },\n    formGrid: {\n      marginTop:'70px',\n      margin:'auto'\n    },\n    paper: {\n      margin: theme.spacing(8, 4),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n      width: '100%',\n      marginTop: theme.spacing(1),\n    },\n    profileBtn: {\n      paddingTop:'10px',\n      marginTop:'10px',\n      marginBottom:'10px'\n    },\n    imageIcon: {\n      marginBottom:'8px',\n      marginRight:'5px'\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n  }))\n\n\nconst SignUp = ({ setIsAuth }) => {\n    const dispatch = useDispatch()\n    const classes = useStyles()\n    const reRef = useRef()\n    const [isProfile, setIsProfile] = useState(false)\n    const [message, setMessage] = useState('')\n    const [openAlert, setOpenAlert] = useState(false)\n    const [showPassword, setShowPassword] = useState(false)\n    const [showConfirmPassword, setShowConfirmPassword] = useState(false)\n    const [fileName, setFileName] = useState('')\n    const history = useHistory()\n  \n    // Form validation\n    const validationSchema = Yup.object().shape({\n            username:Yup.string()\n            .required('user name is required!'),\n             password:Yup.string()\n            .required('password is required!')\n            .min(6, 'password have to be at least 6 characters long'),\n            confirmPassword:Yup.string()\n            .required('confirm your password!')\n            .oneOf([Yup.ref('password'), null], 'Passwords must match'),\n            photo:Yup.string()\n            .required('profile image is required')\n    })\n\n    const errorHelper = (formik,values) => ({\n      error: formik.errors[values] && formik.touched[values] ? true : false,\n      helperText: formik.errors[values] && formik.touched[values] ? formik.errors[values]:null\n  })\n\n    // Handle password visiblity \n    const  handleClickShowPassword = () => {\n      setShowPassword(!showPassword)\n    }\n    const handleClickConfirmPassword = () => {\n      setShowConfirmPassword(!showConfirmPassword)\n    }\n\n    const handleChangeImage = (e, setFieldValue) => {\n      setFieldValue(\"photo\", e.target.files[0])\n      if(e.target.files.length === 0) {\n        setIsProfile(false)\n        setFileName('')\n      } \n      else {\n        setIsProfile(true)\n        setFileName(e.target.files[0].name)\n      }\n    }\n    \n  \n    // Edit the profile image\n    const editProfile =  (values) => {\n     values.fileName = fileName\n     if(typeof values.photo === 'object' ) {\n      const reader = new FileReader()\n      reader.readAsDataURL(values.photo)\n      reader.onloadend = () => {\n        values.photo = reader.result\n        signUpUser(values)\n      }\n     } else {\n      signUpUser(values)\n     }\n    }\n        \n      // Add new user\n     const signUpUser = async (values) => {\n      try {\n            const token = await reRef.current.getValue()\n            const response = await fetch('/auth/signup', { \n            method: 'POST',\n            headers: {\n                'Content-Type':'application/json'\n            },\n            body: JSON.stringify({...values, token})\n          })\n          const data = await response.json()\n          reRef.current.reset()\n          if(data.user){\n            localStorage.setItem('user', JSON.stringify({...data.user,newUser:true}))\n            dispatch(({ type:'AUTH_USER', payload:data.user }))\n            setIsAuth(true)\n            history.push('/')\n          } else {\n         \n            setMessage(data.error)\n            setOpenAlert(true)\n          }\n\n        } catch (error) {\n            console.error(error)\n          }\n    }\n  \n    return (\n      <Grid container className={classes.root}>\n\n      {/* Instagram image */}\n        <Hidden mdDown>\n            <Grid item xs={1} md={2}></Grid>\n            <Grid item xs={2} lg={4} className={classes.image} >\n              <Carousel fade className={classes.slider} interval={2000}>\n                <Carousel.Item>\n                  <img className=\"d-block w-100\" src={Slider1} alt=\"First slide\" />\n                </Carousel.Item>\n                <Carousel.Item>\n                  <img className=\"d-block w-100\" src={Slider2} alt=\" Second slide\"/>\n                </Carousel.Item>\n                <Carousel.Item>\n                <img className=\"d-block w-100\" src={Slider3} alt=\"Third slide\"/>\n                </Carousel.Item>\n              </Carousel>\n            </Grid>\n      </Hidden>\n      \n      {/* Sign up form */}\n      <Grid item xs={12} md={4}  component={Paper} elevation={6} square className={classes.formGrid}>\n          <div className={classes.paper}>\n            <img src=\"https://i.imgur.com/zqpwkLQ.png\" alt=\"logo\" />\n\n\n\n            <Formik\n                    initialValues={{username:'',password:'', photo:''}}\n                    onSubmit={(values,{resetForm}) => editProfile(values, resetForm)}\n                    validationSchema={validationSchema}\n                    enableReinitialize={true}>\n                    {(props) => (\n                        <form style={{textAlign:'center'}} onSubmit={props.handleSubmit} autoComplete=\"off\">\n  \n                                <TextField name=\"username\" label=\"User name\" variant=\"outlined\" fullWidth {...props.getFieldProps('username')} {...errorHelper(props,'username')}/>   \n                                \n                                <TextField InputProps={{\n                                    endAdornment: (\n                                        <InputAdornment position=\"end\">\n                                            <IconButton onClick={handleClickShowPassword}> {showPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}  </IconButton>\n                                        </InputAdornment>\n                                        )}}  \n                                    type={showPassword ? \"text\": \"password\"} variant=\"outlined\" margin=\"normal\" fullWidth name=\"password\" label=\"Password\" {...props.getFieldProps('password')} {...errorHelper(props,'password')} />   \n                           \n                           <TextField InputProps={{\n                                    endAdornment: (\n                                        <InputAdornment position=\"end\">\n                                            <IconButton onClick={handleClickConfirmPassword}> {showConfirmPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}  </IconButton>\n                                        </InputAdornment>\n                                        )}}  \n                                    type={showConfirmPassword ? \"text\": \"password\"} variant=\"outlined\" margin=\"normal\" fullWidth name=\"confirmPassword\" label=\"Confirm Password\" {...props.getFieldProps('confirmPassword')} {...errorHelper(props,'confirmPassword')} />\n                         \n                                <Input id=\"file\"  className=\"inputfile\" type=\"file\" name=\"photo\" onChange={(e) => handleChangeImage(e,props.setFieldValue )} hidden/> \n                                <Button style={{display:'flex', alignItems:'center', margin:'5px 0px'}} color='primary'  variant=\"outlined\">\n                                <div style={{marginRight:'7px'}}><ImageIcon/></div>\n                                <label htmlFor=\"file\">{fileName ? `${fileName} UPLOADED` : 'PROFILE IMAGE'} </label></Button>\n                                {props.errors.photo && props.touched.photo ?  <div className=\"error\">{props.errors.photo}</div>  : null}\n                                <ReCaptcha style={{margin:'10px 0px'}} sitekey=\"6LfruZ4aAAAAAAFNEQG6lPJLbJVjEThKg2DJdjEi\" ref={reRef}/> \n                                  {/* Alert error */}\n                                    <Collapse in={openAlert}>\n                                        <Alert\n                                        severity=\"error\"\n                                        action={ <IconButton color=\"inherit\" size=\"small\" onClick={() => setOpenAlert(false) }> <CloseIcon fontSize=\"inherit\" /> </IconButton>}>\n                                        {message}\n                                        </Alert>\n                                        </Collapse>\n                                <Button className=\"my-3\" variant=\"contained\" color=\"primary\" type=\"submit\" size=\"large\" fullWidth> Sign up </Button>\n                                <Grid container>\n                                  <Grid item>\n                                    <Link href=\"/signin\" variant=\"body2\"> Already have an account? Sign In </Link>\n                                  </Grid>\n                                </Grid>\n                                <Box mt={5}>\n                                  <Copyright />\n                                </Box>\n                         </form> )}\n                    </Formik>  \n                </div>\n              </Grid> \n              <Grid item xs={2}></Grid>\n       \n            </Grid>\n          \n    )\n}\nexport default SignUp\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}