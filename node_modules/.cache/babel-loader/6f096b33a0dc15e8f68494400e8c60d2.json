{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC/Desktop/Projects/Instagram-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';// imrse\nimport{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function authgaurd(ComposedComponent,setIsAuthenticate){var AuthenticationCheck=function AuthenticationCheck(props){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuth=_useState2[0],setIsAuth=_useState2[1];var isUserAuthenticate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_yield$response$json,success;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/auth/isauth');case 2:response=_context.sent;_context.next=5;return response.json();case 5:_yield$response$json=_context.sent;success=_yield$response$json.success;if(success){setIsAuthenticate(true);console.log('auth');setIsAuth(true);}else{setIsAuthenticate(false);setIsAuth(false);console.log('not auth');history.push('/signin');}case 8:case\"end\":return _context.stop();}}},_callee);}));return function isUserAuthenticate(){return _ref.apply(this,arguments);};}();useEffect(function(){isUserAuthenticate();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:isAuth?/*#__PURE__*/_jsx(ComposedComponent,_objectSpread({},props)):null});};return AuthenticationCheck;}","map":{"version":3,"sources":["C:/Users/מלאך גל/Desktop/Projects/Instagram-master/client/src/hoc/Auth.js"],"names":["React","useState","useEffect","useHistory","authgaurd","ComposedComponent","setIsAuthenticate","AuthenticationCheck","props","history","isAuth","setIsAuth","isUserAuthenticate","fetch","response","json","success","console","log","push"],"mappings":"ozBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAAmD;AACnD,OAASC,UAAT,KAA2B,kBAA3B,C,gGAEA,cAAe,SAASC,CAAAA,SAAT,CAAmBC,iBAAnB,CAAsCC,iBAAtC,CAAyD,CACpE,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,KAAD,CAAW,CACnC,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CADmC,cAEPF,QAAQ,CAAC,KAAD,CAFD,wCAE5BS,MAF4B,eAEpBC,SAFoB,eAInC,GAAMC,CAAAA,kBAAkB,0FAAG,mMACFC,CAAAA,KAAK,CAAC,cAAD,CADH,QACnBC,QADmB,qCAECA,CAAAA,QAAQ,CAACC,IAAT,EAFD,2CAEjBC,OAFiB,sBAEjBA,OAFiB,CAGzB,GAAIA,OAAJ,CAAa,CACXV,iBAAiB,CAAC,IAAD,CAAjB,CACAW,OAAO,CAACC,GAAR,CAAY,MAAZ,EACAP,SAAS,CAAC,IAAD,CAAT,CACD,CAJD,IAKK,CACHL,iBAAiB,CAAC,KAAD,CAAjB,CACAK,SAAS,CAAC,KAAD,CAAT,CACAM,OAAO,CAACC,GAAR,CAAY,UAAZ,EACAT,OAAO,CAACU,IAAR,CAAa,SAAb,EACD,CAbwB,sDAAH,kBAAlBP,CAAAA,kBAAkB,0CAAxB,CAgBAV,SAAS,CAAC,UAAM,CACbU,kBAAkB,GACpB,CAFQ,CAEN,EAFM,CAAT,CAIE,mBACE,yBACEF,MAAM,cACP,KAAC,iBAAD,kBAAuBF,KAAvB,EADO,CAEN,IAHF,EADF,CAOD,CA/BL,CAgCA,MAAOD,CAAAA,mBAAP,CACH","sourcesContent":["import React, { useState, useEffect } from 'react' // imrse\nimport { useHistory } from \"react-router-dom\"\n        \nexport default function authgaurd(ComposedComponent, setIsAuthenticate) {\n    const AuthenticationCheck = (props) => {\n        const history = useHistory()\n        const [isAuth, setIsAuth] = useState(false)\n\n        const isUserAuthenticate = async () => {\n          const response = await fetch('/auth/isauth')\n          const { success } = await response.json()\n          if (success) {\n            setIsAuthenticate(true)\n            console.log('auth');\n            setIsAuth(true) \n          }\n          else {\n            setIsAuthenticate(false)\n            setIsAuth(false)\n            console.log('not auth');\n            history.push('/signin')\n          } \n        }     \n\n        useEffect(() => {\n           isUserAuthenticate()\n        }, [])\n        \n          return(\n            <>\n            { isAuth ?\n             <ComposedComponent {...props} /> \n            : null}\n            </>\n            )\n        }\n    return AuthenticationCheck\n}\n    \n        "]},"metadata":{},"sourceType":"module"}