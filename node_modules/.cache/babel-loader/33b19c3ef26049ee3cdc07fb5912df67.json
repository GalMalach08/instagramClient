{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05DE\\u05DC\\u05D0\\u05DA \\u05D2\\u05DC\\\\Desktop\\\\Projects\\\\Instagram-master\\\\client\\\\src\\\\components\\\\home\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Loader from '../loader/Loader';\nimport Story from '../story/Story';\nimport NewUserModal from './newUserModal/NewUserModal';\nimport ShareModal from './shareModal/ShareModal'; // material ui components\n\nimport { Divider, Grid, Input, IconButton, Card, CardActions, CardContent, CardHeader, CardMedia, Collapse, Avatar, Typography, TextField, Button, InputAdornment, Hidden, Tooltip } from '@material-ui/core';\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles';\nimport Alert from '@material-ui/lab/Alert'; // material ui icons\n\nimport AddIcon from '@material-ui/icons/Add';\nimport Fab from '@material-ui/core/Fab';\nimport ShareIcon from '@material-ui/icons/Share';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ImageIcon from '@material-ui/icons/Image';\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\nimport FavoriteBorderOutlinedIcon from '@material-ui/icons/FavoriteBorderOutlined';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MoodIcon from '@material-ui/icons/Mood';\nimport FavoriteIcon from '@material-ui/icons/Favorite'; // Formik\n\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup'; // Cloudinary\n\nimport { Image } from 'cloudinary-react'; // Bootstrap\n\nimport Modal from 'react-bootstrap/Modal'; // intro js\n\nimport { Steps } from 'intro.js-react';\nimport 'intro.js/introjs.css'; // Css\n\nimport './style.css'; // moment.js\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst moment = require('moment'); // material ui style\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    marginTop: '30px'\n  },\n  previewcard: {\n    width: '300px',\n    height: '340px',\n    margin: 'auto'\n  },\n  media: {\n    height: '550px',\n    width: '550px',\n    paddingTop: '56.25%' // 16:9\n\n  },\n  previewmedia: {\n    width: '300px',\n    height: '200px'\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  modalHeader: {\n    display: 'flex',\n    justifyContent: 'center',\n    fontWeight: 'bold'\n  },\n  fab: {\n    position: 'fixed',\n    bottom: '10px',\n    left: '75%',\n    whiteSpace: 'nowrap',\n    zIndex: '50px',\n    borderRadius: '20px',\n    backgroundColor: 'lightblue'\n  },\n  profileBtn: {\n    paddingTop: '10px',\n    marginTop: '10px',\n    marginBottom: '10px'\n  },\n  imageIcon: {\n    marginBottom: '8px',\n    marginRight: '5px'\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  },\n  likes: {\n    color: \"#262626\",\n    fontSize: '14px',\n    fontWeight: '600'\n  },\n  comment: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: '18px',\n    color: \"#262626\",\n    fontSize: '14px',\n    fontWeight: '600'\n  },\n  AddCommenttextField: {\n    flexBasis: 280,\n    margin: '20px 2px',\n    width: '100%',\n    padding: '1% 0%'\n  },\n  divider: {\n    margin: '15px 0px'\n  },\n  iconButton: {\n    '&:hover': {\n      color: 'red'\n    },\n    '&:click': {\n      outline: 'none'\n    }\n  },\n  suggestion: {\n    position: 'fixed',\n    right: '100px',\n    top: '100px',\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    overflowY: 'auto',\n    height: '100%',\n    paddingRight: '20px',\n    scrollbarWidth: 'none'\n  },\n  story: {\n    height: '118px',\n    width: '614px',\n    display: 'flex',\n    marginLeft: '360px'\n  }\n}));\n\nconst Home = () => {\n  _s();\n\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('user'));\n  const [posts, setPosts] = useState([]);\n  const [shareModalOpen, setShareModalOpen] = useState(false);\n  const [isBedAlert, setIsBedAlert] = useState(false);\n  const [commentValue, setCommentValue] = useState('');\n  const [previewSource, setPreviewSource] = useState('');\n  const [suggestionUsers, setSuggestionUsers] = useState([]);\n  const [isFollowed, setIsFollowed] = useState(false);\n  const [isLike, setIsLike] = useState(false);\n  const [storiesList, setStoriesList] = useState([]);\n  const [storiesUsers, setStoriesUsers] = useState([]);\n  const [isProfile, setIsProfile] = useState(false);\n  const [message, setMessage] = useState('');\n  const [openAlert, setOpenAlert] = useState(false);\n  const [fileName, setFileName] = useState('');\n  const [emailModal, setEmailModal] = useState(false); // intro js states\n\n  const [firstEntry, setFirstEntry] = useState(false);\n  const [stepsEnabled, setStepsEnabled] = useState(false);\n  const [initialStep, setInitialStep] = useState(0);\n  const [steps, setSteps] = useState([{\n    element: \"#stepOne\",\n    intro: \"Start following users to see their special moments and experiences üòé\",\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: \"#stepTwo\",\n    intro: \"Add your own photo's and video's and start share your feelings with the world! üì∑\",\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }, {\n    element: \"#stepThree\",\n    intro: \"Upload a story daily to update your followers on how you are doing today ü•≥. The story is completely gone after 24 hours\",\n    position: 'left',\n    tooltipClass: 'myTooltipClass'\n  }]); // Modal functions\n\n  const closeModal = () => setEmailModal(false);\n\n  const openModal = () => setEmailModal(true); // formik validation\n\n\n  const validationSchema = Yup.object().shape({\n    photo: Yup.string().required('photo is required'),\n    content: Yup.string().required('content is required')\n  }); // Post functions\n  // Edit the profile image\n\n  const editImage = values => {\n    values.fileName = fileName;\n\n    if (typeof values.photo === 'object') {\n      const reader = new FileReader();\n      reader.readAsDataURL(values.photo);\n\n      reader.onloadend = () => {\n        setPreviewSource(reader.result);\n        values.photo = reader.result;\n        addNewPost(values);\n      };\n    } else {\n      addNewPost(values);\n    }\n  }; // Add new Post\n\n\n  const addNewPost = async values => {\n    const newPost = {\n      photo: values.photo,\n      likes: 0,\n      content: values.content,\n      UserId: JSON.parse(localStorage.getItem('user')).id,\n      fileName: values.fileName,\n      date: moment().format('MMMM Do, h:mm a').toString()\n    };\n\n    try {\n      const response = await fetch('https://instappmalach.herokuapp.com/post', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newPost)\n      });\n      const data = await response.json();\n\n      if (data.post) {\n        console.log(data.post);\n        const newPostArray = [...posts];\n        const postObj = {\n          index: posts.length,\n          publisher_id: user.id,\n          publisher_username: user.username,\n          publisher_profile: user.profile,\n          post_id: data.post.id,\n          post_content: data.post.content,\n          post_likes: [],\n          post_likes_old: [],\n          post_likeby: [],\n          post_photo: data.post.photo,\n          post_date: data.post.date,\n          post_comments: []\n        };\n        newPostArray.push(postObj);\n        console.log(newPostArray);\n        setPosts([...newPostArray]);\n        setIsBedAlert(false);\n        setMessage('Post Added!');\n        setOpenAlert(true);\n        setTimeout(() => {\n          setOpenAlert(false);\n          closeModal();\n        }, 1000);\n      } else {\n        setIsBedAlert(true);\n        setMessage(data.error);\n        setOpenAlert(true);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }; // Makes the preview image\n\n\n  const handleChangeImage = (e, setFieldValue) => {\n    const reader = new FileReader();\n    setFieldValue(\"photo\", e.target.files[0]);\n\n    if (e.target.files.length === 0) {\n      setIsProfile(false);\n      setFileName('');\n      setPreviewSource('');\n    } else {\n      reader.readAsDataURL(e.target.files[0]);\n\n      reader.onloadend = () => {\n        setPreviewSource(reader.result);\n      };\n\n      setIsProfile(true);\n      setFileName(e.target.files[0].name);\n    }\n  }; // Add comment \n\n\n  const sendComment = async (PostId, index) => {\n    const newArr = posts;\n    const renderComment = {\n      time: moment().startOf('hour').fromNow().toString(),\n      content: commentValue,\n      commenter: JSON.parse(localStorage.getItem('user')).username,\n      commenter_profile: JSON.parse(localStorage.getItem('user')).profile\n    };\n    console.log(newArr[index].post_comments);\n    newArr[index].post_comments.push(renderComment);\n    console.log(newArr[index].post_comments);\n    setPosts([...newArr]);\n    const comment = {\n      time: moment().startOf('hour').fromNow().toString(),\n      content: commentValue,\n      PostId,\n      UserId: JSON.parse(localStorage.getItem('user')).id\n    };\n\n    try {\n      const response = await fetch('https://instappmalach.herokuapp.com/comment', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(comment)\n      });\n      const data = await response.json();\n\n      if (data.comment) {// console.log(data.comment)\n      } else {\n        console.log('error');\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }; // Add Like\n\n\n  const addLike = async (id, index, isLike) => {\n    try {\n      const newArr = posts;\n      let add;\n\n      if (!isLike) {\n        newArr[index].post_likeby.push(user.username);\n        newArr[index].like = true;\n        setPosts([...newArr]);\n        add = true;\n      } else {\n        console.log('remove');\n        newArr[index].post_likeby = newArr[index].post_likeby.filter(like => like !== user.username);\n        newArr[index].like = false;\n        setPosts([...newArr]);\n        add = false;\n      }\n\n      await fetch('https://instappmalach.herokuapp.com/post/like', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          add,\n          PostId: id,\n          UserId: user.id\n        })\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }; // Get all the posts\n\n\n  const getPosts = async () => {\n    const postsArr = [];\n    let index = 0;\n    const res = await fetch('https://instappmalach.herokuapp.com/post');\n    const data = await res.json();\n    data.forEach(item => {\n      if (user.Followings.find(followed => followed.followed_id === item.publisher_id) || user.id === item.publisher_id || item.publisher_username === \"instagram\") {\n        item.posts.forEach(post => {\n          const post_likeby = [];\n          post.post_likes.forEach(like => post_likeby.push(like.like_username));\n          const isLike = Boolean(post.post_likes.find(likedUser => Number(likedUser.like_userid) === Number(user.id)));\n          const postObj = {\n            index,\n            publisher_id: item.publisher_id,\n            publisher_username: item.publisher_username,\n            publisher_profile: item.publisher_profile,\n            post_id: post.post_id,\n            post_content: post.post_content,\n            post_likes: post.post_likes.length,\n            post_likes_old: post.post_likes.length,\n            post_likeby,\n            post_photo: post.post_photo,\n            post_date: post.post_date,\n            like: isLike,\n            post_comments: post.post_comments\n          };\n          index++;\n          postsArr.push(postObj);\n        });\n      }\n    });\n    console.log(postsArr);\n    setPosts(postsArr);\n  };\n\n  const getStories = async () => {\n    const res = await fetch('https://instappmalach.herokuapp.com/story');\n    const {\n      stories\n    } = await res.json();\n    const storyArr = [];\n    stories.forEach(story => {\n      if (story.User.Followers.find(follower => Number(follower.follower_id) === Number(user.id)) || Number(story.User.id) === Number(user.id) || story.User.username === \"instagram\") {\n        if (!storyArr.find(user => user.username === story.User.username)) {\n          storyArr.push(story.User);\n        }\n      }\n    });\n    setStoriesUsers(storyArr);\n  }; // Get all suggestion users\n\n\n  const getSuggestionUsers = async () => {\n    try {\n      const res = await fetch('https://instappmalach.herokuapp.com/user');\n      const {\n        users\n      } = await res.json();\n      const suggestionArr = [];\n      users.forEach(suggestionUser => {\n        if (!suggestionUser.Followers.find(follower => Number(follower.follower_id) === Number(user.id)) && Number(suggestionUser.id) !== Number(user.id) && suggestionUser.username !== 'instagram') {\n          suggestionArr.push(suggestionUser);\n        }\n      });\n      setSuggestionUsers(suggestionArr);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const setFollow = async id => {\n    // make follow\n    const res = await fetch('https://instappmalach.herokuapp.com/user/follow', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userWhoWantToFollow: user.id,\n        userWhoGetsFollower: id\n      })\n    });\n    const data = await res.json();\n\n    if (data.success) {\n      const newSuggestedUserArr = suggestionUsers.filter(user => user.id !== id);\n      setSuggestionUsers([...newSuggestedUserArr]);\n      user.Followings.push({\n        UserId: Number(user.id),\n        followed_id: Number(id)\n      });\n      localStorage.setItem('user', JSON.stringify(user));\n    }\n  }; // intro js functions\n\n\n  const onExit = () => {\n    setStepsEnabled(false);\n    setFirstEntry(false);\n  };\n\n  useEffect(() => {\n    if (user.newUser) {\n      setFirstEntry(true);\n      user.newUser = false;\n      localStorage.setItem('user', JSON.stringify(user));\n    } else {\n      setFirstEntry(false);\n    }\n\n    getPosts();\n    getStories();\n    getSuggestionUsers();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [firstEntry ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(NewUserModal, {\n        stepsEnabled: stepsEnabled,\n        setStepsEnabled: setStepsEnabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Steps, {\n        enabled: stepsEnabled,\n        steps: steps,\n        initialStep: initialStep,\n        onExit: onExit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true) : null, /*#__PURE__*/_jsxDEV(StylesProvider, {\n      injectFirst: true,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          className: classes.story,\n          sm: 4,\n          md: 4,\n          children: storiesUsers.length !== 0 && /*#__PURE__*/_jsxDEV(Story, {\n            storiesUsers: storiesUsers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 4\n        }, this), posts ? posts.slice(0).reverse().map(post => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sm: 12,\n          md: 10,\n          className: classes.root,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: classes.card,\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n                children: [/*#__PURE__*/_jsxDEV(Image, {\n                  cloudName: \"malachcloud\",\n                  publicId: post.publisher_profile,\n                  width: \"70\",\n                  height: \"40\",\n                  crop: \"scale\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 30\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 22\n              }, this),\n              action: /*#__PURE__*/_jsxDEV(IconButton, {\n                children: [\" \", /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 35\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 22\n              }, this),\n              title: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/profile/${post.publisher_id}`,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: classes.likes,\n                  children: post.publisher_username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 63\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 20\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n              className: classes.media,\n              image: post.post_photo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n              disableSpacing: true,\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                className: classes.iconButton,\n                onClick: () => addLike(post.post_id, post.index, post.like),\n                children: [post.like ? /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                  style: {\n                    fill: \"red\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 130\n                }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorderOutlinedIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 170\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                children: [\" \", /*#__PURE__*/_jsxDEV(ChatBubbleOutlineIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 26\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                children: [\" \", /*#__PURE__*/_jsxDEV(ShareIcon, {\n                  onClick: () => setShareModalOpen(true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 27\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(ShareModal, {\n                shareModalOpen: shareModalOpen,\n                setShareModalOpen: setShareModalOpen\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.likes,\n                children: [post.post_likeby.length === 0 && 'be the first one to like this post!', post.post_likeby.length === 1 && `liked by ${post.post_likeby[0] === user.username ? 'you' : post.post_likeby[0]}`, post.post_likeby.length === 2 && `liked by ${post.post_likeby[0] === user.username ? 'you' : post.post_likeby[0]}, ${post.post_likeby[1] === user.username ? 'you' : post.post_likeby[1]}`, post.post_likeby.length > 2 && `liked by ${post.post_likeby[0] === user.username ? 'you' : post.post_likeby[0]}, ${post.post_likeby[1] === user.username ? 'you' : post.post_likeby[1]} and ${post.post_likeby.length - 2} others`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.likes,\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  to: `/profile/${post.publisher_id}`,\n                  style: {\n                    color: 'black'\n                  },\n                  children: [\" \", post.publisher_username, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 49\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"post-content\",\n                  children: [\" \", post.post_content, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 151\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                className: classes.divider\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 11\n              }, this), post.post_comments.map(comment => /*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.comment,\n                children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                  children: [/*#__PURE__*/_jsxDEV(Image, {\n                    cloudName: \"malachcloud\",\n                    publicId: comment.commenter_profile,\n                    width: \"80\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 21\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/profile/${comment.commenter_id}`,\n                  style: {\n                    color: 'black'\n                  },\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"commeter\",\n                    children: [comment.commenter, \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 84\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"post-content\",\n                  children: comment.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 13\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"post-date\",\n                children: post.post_date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                className: classes.divider\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                className: classes.AddCommenttextField,\n                variant: \"outlined\",\n                type: \"text\",\n                label: \"Add a comment...\",\n                onChange: e => setCommentValue(e.target.value),\n                InputProps: {\n                  startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                    position: \"start\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(MoodIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 517,\n                        columnNumber: 30\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 517,\n                      columnNumber: 17\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 516,\n                    columnNumber: 15\n                  }, this),\n                  endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                    position: \"end\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => sendComment(post.post_id, post.index),\n                      color: \"primary\",\n                      children: \"Post\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 522,\n                      columnNumber: 17\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 15\n                  }, this)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 10\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 10\n        }, this)) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n          smDown: true,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            className: classes.suggestion,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"stepOne\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"user-suggested-headline\",\n                children: \"Suggestions For You\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 27\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 8\n            }, this), suggestionUsers && suggestionUsers.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(CardHeader, {\n                avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n                  children: [/*#__PURE__*/_jsxDEV(Image, {\n                    cloudName: \"malachcloud\",\n                    publicId: user.profile,\n                    width: \"70\",\n                    height: \"40\",\n                    crop: \"scale\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 537,\n                    columnNumber: 30\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 22\n                }, this),\n                action: /*#__PURE__*/_jsxDEV(IconButton, {\n                  style: {\n                    marginRight: '10px'\n                  },\n                  onClick: () => setFollow(user.id),\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"h6\", {\n                    className: \"user-suggested-follow\",\n                    children: \"Follow\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 538,\n                    columnNumber: 99\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 22\n                }, this),\n                title: /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/profile/${user.id}`,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: classes.likes,\n                    children: user.username\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 539,\n                  columnNumber: 20\n                }, this),\n                subheader: \"New to Instagram\",\n                style: {\n                  width: '110%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 9\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Fab, {\n          id: \"stepTwo\",\n          color: \"primary\",\n          className: classes.fab,\n          onClick: () => openModal(),\n          title: \"Add new post\",\n          children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          size: \"lg\",\n          centered: true,\n          show: emailModal,\n          onHide: closeModal,\n          style: {\n            margin: '70px auto 30px',\n            maxHeight: '90%',\n            overflowY: 'auto'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n            className: classes.modalHeader,\n            children: [\" \", /*#__PURE__*/_jsxDEV(Modal.Title, {\n              style: {\n                fontWeight: '700'\n              },\n              children: \" Add new post \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 65\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: /*#__PURE__*/_jsxDEV(Formik, {\n              initialValues: {\n                photo: '',\n                content: ''\n              },\n              validationSchema: validationSchema,\n              onSubmit: editImage,\n              children: ({\n                errors,\n                touched,\n                setFieldValue\n              }) => /*#__PURE__*/_jsxDEV(Form, {\n                style: {\n                  textAlign: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Input, {\n                  id: \"file\",\n                  className: \"inputfile\",\n                  type: \"file\",\n                  name: \"photo\",\n                  onChange: e => handleChangeImage(e, setFieldValue),\n                  hidden: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  className: classes.profileBtn,\n                  color: \"primary\",\n                  variant: \"outlined\",\n                  children: [/*#__PURE__*/_jsxDEV(ImageIcon, {\n                    className: classes.imageIcon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 566,\n                    columnNumber: 96\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"file\",\n                    children: [fileName ? `${fileName} UPLOADED` : 'UPLPOAD IMAGE', \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 566,\n                    columnNumber: 138\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 21\n                }, this), errors.photo && touched.photo ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"error\",\n                  children: errors.photo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 57\n                }, this) : null, previewSource ? /*#__PURE__*/_jsxDEV(Card, {\n                  className: classes.previewcard,\n                  children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                    avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n                      children: [/*#__PURE__*/_jsxDEV(Image, {\n                        cloudName: \"malachcloud\",\n                        publicId: user.profile,\n                        width: \"80\",\n                        crop: \"scale\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 570,\n                        columnNumber: 56\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 570,\n                      columnNumber: 48\n                    }, this),\n                    action: /*#__PURE__*/_jsxDEV(IconButton, {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 570,\n                        columnNumber: 171\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 570,\n                      columnNumber: 158\n                    }, this),\n                    title: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: classes.likes,\n                      children: user.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 570,\n                      columnNumber: 211\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 570,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n                    className: classes.previewmedia,\n                    image: previewSource\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 571,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n                    disableSpacing: true,\n                    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                      className: classes.iconButton,\n                      children: [\" \", /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                        style: {\n                          fill: \"red\"\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 573,\n                        columnNumber: 73\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(ChatBubbleOutlineIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 574,\n                        columnNumber: 42\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 574,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(ShareIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 575,\n                        columnNumber: 43\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 575,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 572,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(TextField, {\n                  multiline: true,\n                  rows: 4,\n                  variant: \"outlined\",\n                  margin: \"normal\",\n                  fullWidth: true,\n                  label: \"add description\",\n                  name: \"content\",\n                  onChange: event => setFieldValue(\"content\", event.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 579,\n                  columnNumber: 25\n                }, this), errors.content && touched.content ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"error\",\n                  children: errors.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 580,\n                  columnNumber: 63\n                }, this) : null, /*#__PURE__*/_jsxDEV(Collapse, {\n                  in: openAlert,\n                  children: /*#__PURE__*/_jsxDEV(Alert, {\n                    style: {\n                      margin: '10px'\n                    },\n                    severity: isBedAlert ? \"error\" : \"success\",\n                    action: /*#__PURE__*/_jsxDEV(IconButton, {\n                      color: \"inherit\",\n                      size: \"small\",\n                      onClick: () => setOpenAlert(false),\n                      children: [\" \", /*#__PURE__*/_jsxDEV(CloseIcon, {\n                        fontSize: \"inherit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 586,\n                        columnNumber: 117\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 586,\n                      columnNumber: 38\n                    }, this),\n                    children: message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 583,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  color: \"primary\",\n                  type: \"Submit\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 590,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 18\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Home, \"EMGYY0uDFDjPC894um2sWSSDneI=\", false, function () {\n  return [useStyles];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/◊û◊ú◊ê◊ö ◊í◊ú/Desktop/Projects/Instagram-master/client/src/components/home/Home.js"],"names":["React","useEffect","useState","Link","Loader","Story","NewUserModal","ShareModal","Divider","Grid","Input","IconButton","Card","CardActions","CardContent","CardHeader","CardMedia","Collapse","Avatar","Typography","TextField","Button","InputAdornment","Hidden","Tooltip","makeStyles","StylesProvider","Alert","AddIcon","Fab","ShareIcon","MoreVertIcon","ImageIcon","ChatBubbleOutlineIcon","FavoriteBorderOutlinedIcon","CloseIcon","MoodIcon","FavoriteIcon","Formik","Form","Yup","Image","Modal","Steps","moment","require","useStyles","theme","root","display","justifyContent","marginTop","previewcard","width","height","margin","media","paddingTop","previewmedia","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","modalHeader","fontWeight","fab","position","bottom","left","whiteSpace","zIndex","borderRadius","backgroundColor","profileBtn","marginBottom","imageIcon","marginRight","extendedIcon","spacing","likes","color","fontSize","comment","alignItems","AddCommenttextField","flexBasis","padding","divider","iconButton","outline","suggestion","right","top","flexDirection","overflowY","paddingRight","scrollbarWidth","story","Home","classes","user","JSON","parse","localStorage","getItem","posts","setPosts","shareModalOpen","setShareModalOpen","isBedAlert","setIsBedAlert","commentValue","setCommentValue","previewSource","setPreviewSource","suggestionUsers","setSuggestionUsers","isFollowed","setIsFollowed","isLike","setIsLike","storiesList","setStoriesList","storiesUsers","setStoriesUsers","isProfile","setIsProfile","message","setMessage","openAlert","setOpenAlert","fileName","setFileName","emailModal","setEmailModal","firstEntry","setFirstEntry","stepsEnabled","setStepsEnabled","initialStep","setInitialStep","steps","setSteps","element","intro","tooltipClass","closeModal","openModal","validationSchema","object","shape","photo","string","required","content","editImage","values","reader","FileReader","readAsDataURL","onloadend","result","addNewPost","newPost","UserId","id","date","format","toString","response","fetch","method","headers","body","stringify","data","json","post","console","log","newPostArray","postObj","index","length","publisher_id","publisher_username","username","publisher_profile","profile","post_id","post_content","post_likes","post_likes_old","post_likeby","post_photo","post_date","post_comments","push","setTimeout","error","handleChangeImage","e","setFieldValue","target","files","name","sendComment","PostId","newArr","renderComment","time","startOf","fromNow","commenter","commenter_profile","addLike","add","like","filter","getPosts","postsArr","res","forEach","item","Followings","find","followed","followed_id","like_username","Boolean","likedUser","Number","like_userid","getStories","stories","storyArr","User","Followers","follower","follower_id","getSuggestionUsers","users","suggestionArr","suggestionUser","setFollow","userWhoWantToFollow","userWhoGetsFollower","success","newSuggestedUserArr","setItem","onExit","newUser","slice","reverse","map","card","fill","commenter_id","value","startAdornment","endAdornment","maxHeight","errors","touched","textAlign","event"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom'\nimport Loader from '../loader/Loader'\nimport Story from '../story/Story'\nimport NewUserModal from './newUserModal/NewUserModal'\nimport ShareModal from './shareModal/ShareModal'\n// material ui components\nimport { Divider, Grid, Input, IconButton, Card, CardActions, CardContent, CardHeader, CardMedia, Collapse, Avatar, Typography, TextField, Button, InputAdornment, Hidden, Tooltip  } from '@material-ui/core';\nimport { makeStyles, StylesProvider } from '@material-ui/core/styles';\nimport Alert from '@material-ui/lab/Alert';\n// material ui icons\nimport AddIcon from '@material-ui/icons/Add';\nimport Fab from '@material-ui/core/Fab';\nimport ShareIcon from '@material-ui/icons/Share';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ImageIcon from '@material-ui/icons/Image';\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\nimport FavoriteBorderOutlinedIcon from '@material-ui/icons/FavoriteBorderOutlined';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MoodIcon from '@material-ui/icons/Mood';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\n// Formik\nimport { Formik, Form} from 'formik';\nimport * as Yup from 'yup';\n// Cloudinary\nimport {Image} from 'cloudinary-react';\n// Bootstrap\nimport Modal from 'react-bootstrap/Modal'\n// intro js\nimport { Steps } from 'intro.js-react';\nimport 'intro.js/introjs.css';\n// Css\nimport './style.css'\n\n// moment.js\nconst moment = require('moment')\n\n// material ui style\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display:'flex',\n    justifyContent:'center',\n    marginTop:'30px'\n  },\n  previewcard:{\n    width:'300px',\n    height:'340px',\n    margin:'auto'\n  },\n  media: {\n    height: '550px',\n    width:'550px',\n    paddingTop: '56.25%', // 16:9\n  },\n  previewmedia: {\n    width:'300px',\n    height:'200px'\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  modalHeader: {\n   display: 'flex',\n   justifyContent: 'center',\n   fontWeight:'bold',\n  },\n  fab: {\n    position:'fixed',\n    bottom: '10px',\n    left: '75%',\n    whiteSpace: 'nowrap',\n    zIndex: '50px',\n    borderRadius:'20px',\n    backgroundColor:'lightblue'\n  },\n  profileBtn: {\n    paddingTop:'10px',\n    marginTop:'10px',\n    marginBottom:'10px'\n  },\n  imageIcon: {\n    marginBottom:'8px',\n    marginRight:'5px'\n  },\n  extendedIcon: { \n    marginRight: theme.spacing(1),\n  },\n  likes: {\n    color: \"#262626\",\n    fontSize:'14px',\n    fontWeight: '600',\n  },\n  comment: {\n    display:'flex',\n    alignItems:'center',\n    marginTop:'18px',\n    color: \"#262626\",\n    fontSize:'14px',\n    fontWeight: '600',\n  },\n  AddCommenttextField: {\n    flexBasis: 280,\n    margin: '20px 2px',\n    width:'100%',\n    padding:'1% 0%',\n    \n  },\n  divider: {\n    margin:'15px 0px'\n  },\n  iconButton: {\n    '&:hover': {\n      color:'red'\n    },\n    '&:click': {\n      outline: 'none'\n    },\n  },\n  suggestion: {\n    position: 'fixed',\n    right: '100px',\n    top: '100px',\n    display:'flex',\n    flexDirection: 'column',\n    width: '100%',\n    overflowY:'auto',\n    height:'100%',\n    paddingRight:'20px',\n    scrollbarWidth: 'none'\n  },\n  story: {\n    height:'118px',\n    width:'614px',\n    display:'flex',\n    marginLeft:'360px'\n  }\n}))\n\n const Home = () => {\n  const classes = useStyles()\n  const user = JSON.parse(localStorage.getItem('user'))\n  const [posts, setPosts] = useState([])\n  const [shareModalOpen, setShareModalOpen] = useState(false)\n  const [isBedAlert, setIsBedAlert] = useState(false)\n  const [commentValue, setCommentValue] = useState('')\n  const [previewSource, setPreviewSource] = useState('')\n  const [suggestionUsers, setSuggestionUsers] = useState([])\n  const [isFollowed, setIsFollowed] = useState(false)\n  const [isLike, setIsLike] = useState(false)\n  const [storiesList, setStoriesList] = useState([])\n  const [storiesUsers, setStoriesUsers] = useState([])\n  const [isProfile, setIsProfile] = useState(false)\n  const [message, setMessage] = useState('')\n  const [openAlert, setOpenAlert] = useState(false)\n  const [fileName, setFileName] = useState('')\n  const [emailModal, setEmailModal] = useState(false)\n  // intro js states\n  const [firstEntry, setFirstEntry] = useState(false)\n  const [stepsEnabled, setStepsEnabled] = useState(false)\n  const [initialStep, setInitialStep] = useState(0)\n  const [steps, setSteps] = useState([\n      { element:\"#stepOne\", intro: \"Start following users to see their special moments and experiences üòé\", position: 'left', tooltipClass: 'myTooltipClass' },\n      { element:\"#stepTwo\", intro: \"Add your own photo's and video's and start share your feelings with the world! üì∑\", position: 'left', tooltipClass: 'myTooltipClass' },\n      { element:\"#stepThree\", intro: \"Upload a story daily to update your followers on how you are doing today ü•≥. The story is completely gone after 24 hours\", position: 'left', tooltipClass: 'myTooltipClass' },\n  ])\n\n  // Modal functions\n  const closeModal = () => setEmailModal(false)\n  const openModal = () => setEmailModal(true)\n\n  // formik validation\n  const validationSchema = Yup.object().shape({\n    photo:Yup.string()\n    .required('photo is required'),\n    content:Yup.string()\n    .required('content is required')\n  })\n\n// Post functions\n\n// Edit the profile image\n  const editImage =  (values) => {\n    values.fileName = fileName\n    if(typeof values.photo === 'object' ) {\n    const reader = new FileReader()\n    reader.readAsDataURL(values.photo)\n    reader.onloadend = () => {\n      setPreviewSource(reader.result)\n      values.photo = reader.result\n      addNewPost(values)\n    }\n    } else {\n      addNewPost(values)\n    }\n  }\n\n  // Add new Post\n  const addNewPost = async (values) => {\n      const newPost = {\n        photo: values.photo,\n        likes: 0,\n        content: values.content,\n        UserId : JSON.parse(localStorage.getItem('user')).id,\n        fileName: values.fileName,\n        date: moment().format('MMMM Do, h:mm a').toString()\n      }\n        try {\n          const response = await fetch('https://instappmalach.herokuapp.com/post', { \n          method: 'POST',\n          headers: {\n              'Content-Type':'application/json'\n          },\n          body: JSON.stringify(newPost)\n        })\n        const data = await response.json()\n        if(data.post){\n          console.log(data.post);\n          const newPostArray = [...posts]\n          const postObj = {\n            index: posts.length,\n            publisher_id: user.id,\n            publisher_username: user.username,\n            publisher_profile: user.profile,\n            post_id: data.post.id,\n            post_content: data.post.content,\n            post_likes: [],\n            post_likes_old: [],\n            post_likeby: [],\n            post_photo: data.post.photo,\n            post_date: data.post.date,\n            post_comments: []\n          }\n          newPostArray.push(postObj)\n          console.log(newPostArray)\n          setPosts([...newPostArray])\n          setIsBedAlert(false)\n          setMessage('Post Added!')\n          setOpenAlert(true)\n          setTimeout(() => {\n            setOpenAlert(false)\n            closeModal()\n          },1000)\n        } else {\n          setIsBedAlert(true)\n          setMessage(data.error)\n          setOpenAlert(true)\n        }\n\n      } catch (error) {\n          console.error(error)\n        }\n  }\n\n  // Makes the preview image\n  const handleChangeImage = (e,setFieldValue) => {\n      const reader = new FileReader()\n      setFieldValue(\"photo\", e.target.files[0])\n      if(e.target.files.length === 0) {\n        setIsProfile(false)\n        setFileName('')\n        setPreviewSource('')\n      } \n      else {\n        reader.readAsDataURL(e.target.files[0])\n        reader.onloadend = () => {\n          setPreviewSource(reader.result)\n        }\n        setIsProfile(true)\n        setFileName(e.target.files[0].name)\n      }\n  }\n\n  // Add comment \n  const sendComment = async (PostId, index) => {\n    const newArr = posts\n    const renderComment = {\n      time: moment().startOf('hour').fromNow().toString(),\n      content: commentValue,\n      commenter:JSON.parse(localStorage.getItem('user')).username,\n      commenter_profile:JSON.parse(localStorage.getItem('user')).profile,\n    }\n    console.log(newArr[index].post_comments);\n    newArr[index].post_comments.push(renderComment)\n    console.log(newArr[index].post_comments);\n    setPosts([...newArr])\n\n    const comment = {\n      time: moment().startOf('hour').fromNow().toString(),\n      content: commentValue,\n      PostId,\n      UserId: JSON.parse(localStorage.getItem('user')).id,\n    }\n    try {\n      const response = await fetch('https://instappmalach.herokuapp.com/comment', { \n      method: 'POST',\n      headers: {\n          'Content-Type':'application/json'\n      },\n      body: JSON.stringify(comment)\n    })\n    const data = await response.json()\n    if(data.comment){\n      // console.log(data.comment)\n    } else {\n      console.log('error')\n    }\n  } catch (error) {\n      console.error(error)\n    }\n  }\n  // Add Like\n  const addLike = async (id,index, isLike) => {\n    try {\n      const newArr = posts\n      let add\n      if(!isLike) { \n        newArr[index].post_likeby.push(user.username)\n        newArr[index].like = true\n        setPosts([...newArr])\n        add = true\n      } else {\n        console.log('remove');\n        newArr[index].post_likeby =  newArr[index].post_likeby.filter(like => like !== user.username)\n       \n        newArr[index].like = false\n        setPosts([...newArr])\n        add = false\n      }\n      await fetch('https://instappmalach.herokuapp.com/post/like', { \n        method: 'POST',\n        headers: {\n            'Content-Type':'application/json'\n        },\n        body: JSON.stringify({ add, PostId:id, UserId:user.id })\n      })\n    } catch (error) {\n      console.log(error)\n    }\n \n  }\n  // Get all the posts\n  const getPosts = async () => {\n    const postsArr = []\n    let index = 0\n    const res = await fetch('https://instappmalach.herokuapp.com/post')\n    const data = await res.json()\n    data.forEach((item) => {\n      if(user.Followings.find(followed => followed.followed_id === item.publisher_id) || user.id === item.publisher_id || item.publisher_username === \"instagram\"){\n        item.posts.forEach((post) => {\n          const post_likeby = []\n          post.post_likes.forEach(like => post_likeby.push(like.like_username))\n          const isLike = Boolean(post.post_likes.find(likedUser => Number(likedUser.like_userid) === Number(user.id)))\n          const postObj = {\n            index,\n            publisher_id: item.publisher_id,\n            publisher_username: item.publisher_username,\n            publisher_profile: item.publisher_profile,\n            post_id: post.post_id,\n            post_content: post.post_content,\n            post_likes: post.post_likes.length,\n            post_likes_old: post.post_likes.length,\n            post_likeby,\n            post_photo: post.post_photo,\n            post_date: post.post_date,\n            like:isLike,\n            post_comments: post.post_comments\n          }\n          index ++\n          postsArr.push(postObj)\n         \n        })\n      }\n    })\n    console.log(postsArr);\n    setPosts(postsArr)\n}\n\nconst getStories = async () => {\n  const res = await fetch('https://instappmalach.herokuapp.com/story')\n  const { stories } = await res.json()\n  const storyArr = []\n  stories.forEach(story => {\n    if(story.User.Followers.find(follower => Number(follower.follower_id) === Number(user.id)) || Number(story.User.id) === Number(user.id) || story.User.username === \"instagram\") {\n      if(!(storyArr.find(user => user.username === story.User.username))) {\n        storyArr.push(story.User)\n      }\n    }\n  })\n  \n  setStoriesUsers(storyArr)\n}\n\n// Get all suggestion users\nconst getSuggestionUsers = async () => {\n  try {\n    const res = await fetch('https://instappmalach.herokuapp.com/user')\n    const { users } = await res.json()\n    \n    const suggestionArr = []\n   \n    users.forEach(suggestionUser => {\n      if(!(suggestionUser.Followers.find(follower => Number(follower.follower_id) === Number(user.id))) && (Number(suggestionUser.id) !== Number(user.id)) && (suggestionUser.username !== 'instagram')){\n        suggestionArr.push(suggestionUser)\n      }\n    })\n \n\n    setSuggestionUsers(suggestionArr)\n \n} catch (error) {\n    console.error(error)\n  }\n}\n\nconst setFollow = async (id) => {\n      // make follow\n          const res = await fetch('https://instappmalach.herokuapp.com/user/follow', {\n          method: 'POST',\n          headers: {\n              'Content-Type':'application/json'\n          },\n          body: JSON.stringify({userWhoWantToFollow: user.id , userWhoGetsFollower: id })\n        })\n        const data = await res.json()\n        if(data.success) {\n            const newSuggestedUserArr = suggestionUsers.filter(user => user.id !== id)\n            setSuggestionUsers([...newSuggestedUserArr])\n            user.Followings.push({UserId:Number(user.id), followed_id: Number(id)})\n            localStorage.setItem('user', JSON.stringify(user))\n        }\n}\n\n// intro js functions\nconst onExit = () => {\n  setStepsEnabled(false)\n  setFirstEntry(false)\n}\n  useEffect(() => {\n    if(user.newUser) {\n      setFirstEntry(true)\n      user.newUser = false\n      localStorage.setItem('user',JSON.stringify(user))\n    }\n     else {\n      setFirstEntry(false)\n     }\n   \n    getPosts()\n    getStories()\n    getSuggestionUsers()\n  \n  }, [])\n\n\n  return (\n    <>\n    {firstEntry ? \n    <>\n    <NewUserModal stepsEnabled={stepsEnabled} setStepsEnabled={setStepsEnabled}/>\n    <Steps enabled={stepsEnabled} steps={steps} initialStep={initialStep} onExit={onExit}/>\n    </>\n     : null}\n   <StylesProvider injectFirst>\n   <Grid container>\n   <Grid item className={classes.story} sm={4} md={4}>\n    {storiesUsers.length !== 0  &&  <Story storiesUsers={storiesUsers} />}\n   </Grid>\n\n       {posts ?  posts.slice(0).reverse().map(post => (\n         <Grid item sm={12} md={10} className={classes.root} >\n         <Card className={classes.card}>\n          <CardHeader\n            avatar={ <Avatar><Image cloudName=\"malachcloud\" publicId={post.publisher_profile} width=\"70\" height=\"40\" crop=\"scale\" /> </Avatar>}\n            action={ <IconButton> <MoreVertIcon /> </IconButton> }\n            title={<Link to={`/profile/${post.publisher_id}`}><span className={classes.likes}>{post.publisher_username}</span></Link>}\n          />\n\n          <CardMedia className={classes.media} image={post.post_photo}></CardMedia>\n\n          <CardActions disableSpacing>\n            <IconButton className={classes.iconButton} onClick={() => addLike(post.post_id, post.index, post.like)}>{post.like ? <FavoriteIcon style={{fill: \"red\"}}/> : <FavoriteBorderOutlinedIcon /> } </IconButton>\n            <IconButton> <ChatBubbleOutlineIcon/> </IconButton>\n            <IconButton > <ShareIcon onClick={() => setShareModalOpen(true)}/> </IconButton>\n            <ShareModal shareModalOpen={shareModalOpen} setShareModalOpen={setShareModalOpen} /> \n          </CardActions>\n\n          <CardContent>\n          <Typography className={classes.likes}> \n          {post.post_likeby.length === 0 && 'be the first one to like this post!'}\n          {post.post_likeby.length === 1 && `liked by ${post.post_likeby[0] === user.username ? 'you' : post.post_likeby[0] }`}\n          {post.post_likeby.length === 2 && `liked by ${post.post_likeby[0] === user.username ? 'you' : post.post_likeby[0] }, ${post.post_likeby[1] === user.username ? 'you' : post.post_likeby[1] }`}\n          {post.post_likeby.length > 2 && `liked by ${post.post_likeby[0] === user.username ? 'you' : post.post_likeby[0] }, ${post.post_likeby[1] === user.username ? 'you' : post.post_likeby[1] } and ${post.post_likeby.length - 2} others`}\n          </Typography>\n          <Typography className={classes.likes}><Link to={`/profile/${post.publisher_id}`} style={{color:'black'}}> {post.publisher_username} </Link> <span className=\"post-content\"> {post.post_content} </span></Typography> \n          <Divider className={classes.divider}/>\n          {post.post_comments.map(comment => (\n            <Typography  className={classes.comment}> \n            <Avatar><Image cloudName=\"malachcloud\" publicId={comment.commenter_profile} width=\"80\" /> </Avatar>\n            <Link to={`/profile/${comment.commenter_id}`} style={{color:'black'}}> <span className='commeter'>{comment.commenter} </span> </Link>\n            <span className=\"post-content\">{comment.content}</span>\n            </Typography>\n          ))}\n          <div className=\"post-date\">{post.post_date}</div>\n          <Divider className={classes.divider}/>\n          <TextField className={classes.AddCommenttextField} variant=\"outlined\" type=\"text\" label=\"Add a comment...\"\n          onChange={ e => setCommentValue(e.target.value)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <IconButton> <MoodIcon/></IconButton>\n              </InputAdornment>\n            ),\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <Button onClick={() => sendComment(post.post_id, post.index)} color=\"primary\">Post</Button>\n              </InputAdornment>\n            ),\n          }}/>\n          </CardContent>\n        </Card>\n      </Grid>   \n       )):  <Loader /> }\n        <Hidden smDown>\n       <Grid item className={classes.suggestion} md={3}>\n       <div id=\"stepOne\"> <h6 className=\"user-suggested-headline\">Suggestions For You</h6> </div>\n         \n       {suggestionUsers && suggestionUsers.map(user => (\n        <div>\n        <CardHeader \n            avatar={ <Avatar><Image cloudName=\"malachcloud\" publicId={user.profile} width=\"70\" height=\"40\" crop=\"scale\" /> </Avatar>}\n            action={ <IconButton style={{marginRight:'10px'}} onClick={() => setFollow(user.id)}> <h6 className=\"user-suggested-follow\">Follow</h6> </IconButton> }\n            title={<Link to={`/profile/${user.id}`}><span className={classes.likes}>{user.username}</span></Link>}\n            subheader=\"New to Instagram\"\n            style={{width:'110%'}}\n          />\n           </div>\n       ))}\n       </Grid>\n       </Hidden>\n\n      {/* Fab */}\n      <Fab id=\"stepTwo\" color=\"primary\"  className={classes.fab} onClick={() => openModal()} title=\"Add new post\"> \n        <AddIcon />\n      </Fab>\n      {/* Share Modal */}\n   \n    \n       {/* Modal */}\n       <Modal size=\"lg\" centered show={emailModal} onHide={closeModal} style={{margin:'70px auto 30px' , maxHeight:'90%', overflowY:'auto'}}>\n                 <Modal.Header className={classes.modalHeader}> <Modal.Title style={{fontWeight:'700'}}> Add new post </Modal.Title> </Modal.Header>\n                 <Modal.Body>\n                 <Formik \n                   initialValues={{photo:'',content:''}}\n                   validationSchema={validationSchema}\n                   onSubmit={ editImage }>\n                    {({ errors, touched, setFieldValue }) => (\n                      <Form style={{textAlign:'center'}}>\n                      <Input id=\"file\" className=\"inputfile\" type=\"file\" name=\"photo\" onChange={(e) => handleChangeImage(e,setFieldValue )} hidden/> \n                    <Button className={classes.profileBtn} color='primary'  variant=\"outlined\"><ImageIcon className={classes.imageIcon}/><label htmlFor=\"file\">{fileName ? `${fileName} UPLOADED` : 'UPLPOAD IMAGE'} </label></Button>\n                      {errors.photo && touched.photo ?  <div className=\"error\">{errors.photo}</div>  : null}\n                      {previewSource ? \n                        <Card className={classes.previewcard}>\n                          <CardHeader avatar={ <Avatar><Image cloudName=\"malachcloud\" publicId={user.profile} width=\"80\" crop=\"scale\" /> </Avatar>} action={ <IconButton> <MoreVertIcon /> </IconButton> } title={<span className={classes.likes}>{user.username}</span>}/>\n                          <CardMedia className={classes.previewmedia} image={previewSource}></CardMedia>\n                          <CardActions disableSpacing>\n                            <IconButton className={classes.iconButton}> <FavoriteIcon style={{fill: \"red\"}}/> </IconButton>\n                            <IconButton> <ChatBubbleOutlineIcon/> </IconButton>\n                            <IconButton > <ShareIcon/> </IconButton>\n                          </CardActions>\n                       </Card>\n                      : null}\n                        <TextField  multiline rows={4} variant=\"outlined\" margin=\"normal\" fullWidth label=\"add description\" name=\"content\" onChange={(event) => setFieldValue(\"content\", event.target.value)}/>\n                        {errors.content && touched.content ?  <div className=\"error\">{errors.content}</div>  : null}\n                          {/* Alert error */}\n                        <Collapse in={openAlert}>\n                            <Alert \n                            style={{margin:'10px'}}\n                            severity={isBedAlert ? \"error\": \"success\"}\n                            action={ <IconButton color=\"inherit\" size=\"small\" onClick={() => setOpenAlert(false) }> <CloseIcon fontSize=\"inherit\" /> </IconButton>}>\n                            {message}\n                            </Alert>\n                          </Collapse>\n                        <Button  variant=\"outlined\" color=\"primary\" type=\"Submit\">Submit</Button>\n                      </Form>\n                    )}\n                  </Formik>\n                 </Modal.Body>\n            </Modal>\n      </Grid>\n       </StylesProvider>\n   \n    </>\n  )\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}